<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>TileFlow: A Framework for Modeling Fusion Dataflow via Tree-based Analysis | Zheng's Notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">TileFlow: A Framework for Modeling Fusion Dataflow via Tree-based Analysis</h1><a id="logo" href="/.">Zheng's Notes</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">TileFlow: A Framework for Modeling Fusion Dataflow via Tree-based Analysis</h1><div class="post-meta">2023-12-29<span> | </span><span class="category"><a href="/categories/%E7%BC%96%E8%AF%91%E5%99%A8/">编译器</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.9k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 11</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1. 输入格式描述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#arch.yaml"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 arch.yaml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#prob.yaml"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 prob.yaml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map.yaml"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 map.yaml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 执行结果</span></a></li></ol></li></ol></div></div><div class="post-content"><p>学习<code>TileFlow</code>这篇论文中是如何进行多个内存层级的<code>tiling</code>.</p>
<span id="more"></span>
<h1 id="输入格式描述">1. 输入格式描述</h1>
<p>输入需要如下几个文件, 每个文件描述了不同的内容. <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tileflow <span class="built_in">arch</span>/arch.yaml prob/prob.yaml map/map.yaml macro.yaml </span><br></pre></td></tr></table></figure></p>
<h2 id="arch.yaml">1.1 arch.yaml</h2>
<p>描述了整个芯片的架构层级. <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">architecture:</span> </span><br><span class="line">  <span class="attr">version:</span> <span class="number">0.2</span> </span><br><span class="line"></span><br><span class="line">  <span class="attr">subtree:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">System</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">local:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MainMemory</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">DRAM</span> </span><br><span class="line">      <span class="attr">attributes:</span></span><br><span class="line">        <span class="attr">block-size:</span> <span class="number">16384</span></span><br><span class="line">        <span class="attr">depth:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">word-bits:</span> <span class="number">16</span></span><br><span class="line">        <span class="attr">read_bandwidth:</span> <span class="number">4.3</span></span><br><span class="line">        <span class="attr">write_bandwidth:</span> <span class="number">2.9</span></span><br><span class="line">      </span><br><span class="line">    <span class="attr">subtree:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Buffer</span> </span><br><span class="line">    </span><br><span class="line">      <span class="attr">local:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> </span><br><span class="line">        <span class="attr">class:</span> <span class="string">SRAM</span></span><br><span class="line">        <span class="attr">attributes:</span></span><br><span class="line">          <span class="attr">word-bits:</span> <span class="number">16</span></span><br><span class="line">          <span class="attr">block_size:</span> <span class="number">16384</span></span><br><span class="line">          <span class="attr">depth:</span> <span class="number">3</span></span><br><span class="line">          <span class="attr">read_bandwidth:</span> <span class="number">52</span></span><br><span class="line">          <span class="attr">write_bandwidth:</span> <span class="number">20</span> <span class="comment"># 16 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="attr">subtree:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PE</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">local:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">RegFile[0..255]</span> </span><br><span class="line">          <span class="attr">class:</span> <span class="string">regfile</span></span><br><span class="line">          <span class="attr">attributes:</span></span><br><span class="line">            <span class="attr">meshX:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">meshY:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">depth:</span> <span class="number">1</span></span><br><span class="line">            <span class="attr">block_size:</span> <span class="number">3</span></span><br><span class="line">            <span class="attr">word-bits:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">read_bandwidth:</span> <span class="number">3.2</span></span><br><span class="line">            <span class="attr">write_bandwidth:</span> <span class="number">3.2</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mac[0..255]</span> </span><br><span class="line">          <span class="attr">class:</span> <span class="string">intmac</span> </span><br><span class="line">          <span class="attr">attributes:</span> </span><br><span class="line">            <span class="attr">word-bits:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">meshX:</span> <span class="number">16</span></span><br><span class="line">            <span class="attr">meshY:</span> <span class="number">16</span></span><br></pre></td></tr></table></figure></p>
<h2 id="prob.yaml">1.2 prob.yaml</h2>
<p>这里其实类似<code>halide</code>, 需要列出所有共享的迭代变量,
然后下面每个算子都是用这些维度来构建. 具体可以<a
target="_blank" rel="noopener" href="https://timeloop.csail.mit.edu/timeloop/input-formats/problem">参考这里</a>.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">problem:</span></span><br><span class="line">  <span class="attr">io:</span></span><br><span class="line">    <span class="attr">ins:</span> <span class="string">A,</span> <span class="string">B,</span> <span class="string">D</span></span><br><span class="line">    <span class="attr">outs:</span> <span class="string">E</span></span><br><span class="line">  <span class="attr">dimensions:</span> [<span class="string">M</span>,<span class="string">N</span>,<span class="string">K</span>,<span class="string">L</span>]</span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">M:</span> <span class="string">M</span> </span><br><span class="line">    <span class="attr">N:</span> <span class="string">N</span></span><br><span class="line">    <span class="attr">L:</span> <span class="string">L</span></span><br><span class="line">    <span class="attr">K:</span> <span class="string">K</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">ops:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GEMM1</span></span><br><span class="line">    <span class="attr">dimensions:</span> [<span class="string">M</span>,<span class="string">L</span>,<span class="string">K</span>] </span><br><span class="line">    <span class="attr">data-spaces:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">C</span> </span><br><span class="line">      <span class="attr">projection:</span></span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">M</span>]] </span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">L</span>]] </span><br><span class="line">      <span class="attr">read-write:</span> <span class="literal">True</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">A</span> </span><br><span class="line">      <span class="attr">projection:</span></span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">M</span>]]</span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">K</span>]]</span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">B</span></span><br><span class="line">      <span class="attr">projection:</span></span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">K</span>]]</span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">L</span>]]</span><br><span class="line">    <span class="attr">ins:</span> <span class="string">A,</span> <span class="string">B</span></span><br><span class="line">    <span class="attr">out:</span> <span class="string">C</span></span><br><span class="line">    </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GEMM2</span> </span><br><span class="line">    <span class="attr">dimensions:</span> [<span class="string">M</span>,<span class="string">L</span>,<span class="string">N</span>]</span><br><span class="line">    <span class="attr">data-spaces:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">E</span> </span><br><span class="line">      <span class="attr">projection:</span> </span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">M</span>]]</span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">N</span>]]</span><br><span class="line">      <span class="attr">read-write:</span> <span class="literal">True</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">C</span></span><br><span class="line">      <span class="attr">projection:</span> </span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">M</span>]]</span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">L</span>]]</span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">D</span> </span><br><span class="line">      <span class="attr">projection:</span> </span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">L</span>]]</span><br><span class="line">        <span class="bullet">-</span> [[<span class="string">N</span>]]</span><br><span class="line">    <span class="attr">ins:</span> <span class="string">C,</span> <span class="string">D</span></span><br><span class="line">    <span class="attr">out:</span> <span class="string">E</span> </span><br></pre></td></tr></table></figure>
<p>对应的计算如下所示:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">M = <span class="number">512</span></span><br><span class="line">N = <span class="number">64</span></span><br><span class="line">K = <span class="number">64</span> </span><br><span class="line">L = <span class="number">512</span></span><br><span class="line">C[M,L] = A[M,K] @ B[K,L]</span><br><span class="line">E[M,N] = C[M,L] @ D[L,N]</span><br></pre></td></tr></table></figure>
<h2 id="map.yaml">1.3 map.yaml</h2>
<p>map是一个比较重要的配置, 这里重点说明一下.
<code>type</code>分为temporal表示顺序执行和spatial表示并行执行.
<code>factors: M = MO N = NO K= KO</code>表示它将M/N/K维度分别分为MO/NO/KO块.<code>permutation: NMK</code>表示循环从内到外分别为<code>NMK</code>.
这里的<code>factors: M=MM K=KM N=NI</code>表示再次切分这里的三个维度.
<code>multicast: true</code>表示多播.
<code>split: 1</code>表示映射到硬件xy.</p>
<p>原始文档<a
target="_blank" rel="noopener" href="https://timeloop.csail.mit.edu/timeloop/input-formats/mapping">参考这里</a>.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mapping:</span></span><br><span class="line">  <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">  <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">  <span class="attr">factors:</span> <span class="string">M=MO</span> </span><br><span class="line">  <span class="attr">target:</span> <span class="string">MainMemory</span> </span><br><span class="line"></span><br><span class="line">  <span class="attr">subtree:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Scope</span> </span><br><span class="line">    <span class="attr">type:</span> <span class="string">Sequential</span> </span><br><span class="line"></span><br><span class="line">    <span class="attr">subtree:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">      <span class="attr">factors:</span> <span class="string">K=KO</span> <span class="string">L=LO</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">      <span class="attr">bypass:</span> [<span class="string">C</span>]</span><br><span class="line">      <span class="attr">target:</span> <span class="string">MainMemory</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="literal">False</span></span><br><span class="line">      <span class="attr">tag:</span> <span class="string">op1</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">      <span class="attr">subtree:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">        <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">        <span class="attr">factors:</span> <span class="string">K=KM</span> <span class="string">L=LI</span> <span class="string">M=MM</span></span><br><span class="line">        <span class="attr">permutation:</span> <span class="string">LMK</span></span><br><span class="line">        <span class="attr">target:</span> <span class="string">Cache</span> </span><br><span class="line">        <span class="attr">tag:</span> <span class="string">op1</span> </span><br><span class="line">        </span><br><span class="line">        <span class="attr">subtree:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">Spatial</span> </span><br><span class="line">          <span class="attr">factors:</span> <span class="string">M=SX</span> <span class="string">K=SY</span></span><br><span class="line">          <span class="attr">split:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">permutation:</span> <span class="string">MK</span></span><br><span class="line">          <span class="attr">target:</span> <span class="string">Cache</span></span><br><span class="line">          <span class="attr">tag:</span> <span class="string">op1</span> </span><br><span class="line">          </span><br><span class="line">          <span class="attr">subtree:</span> </span><br><span class="line">          <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">            <span class="attr">type:</span> <span class="string">temporal</span>  </span><br><span class="line">            <span class="attr">factors:</span> <span class="string">M=1</span> <span class="string">L=1</span> <span class="string">K=1</span></span><br><span class="line">            <span class="attr">permutation:</span> <span class="string">MLK</span> </span><br><span class="line">            <span class="attr">target:</span> <span class="string">RegFile</span></span><br><span class="line">            <span class="attr">tag:</span> <span class="string">op1</span> </span><br><span class="line">            </span><br><span class="line">            <span class="attr">subtree:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Op</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">GEMM1</span> </span><br><span class="line"></span><br><span class="line">      <span class="comment"># A common spatial tile</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">      <span class="attr">factors:</span> <span class="string">L=LO</span> <span class="string">N=NO</span></span><br><span class="line">      <span class="attr">target:</span> <span class="string">MainMemory</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="literal">False</span></span><br><span class="line">      <span class="attr">bypass:</span> [<span class="string">C</span>]</span><br><span class="line">      <span class="attr">tag:</span> <span class="string">op2</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">subtree:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">        <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">        <span class="attr">factors:</span> <span class="string">M=MM</span> <span class="string">L=LM</span> <span class="string">N=NI</span></span><br><span class="line">        <span class="attr">permutation:</span> <span class="string">NML</span> </span><br><span class="line">        <span class="attr">target:</span> <span class="string">Cache</span></span><br><span class="line">        <span class="attr">tag:</span> <span class="string">op2</span></span><br><span class="line">        </span><br><span class="line">        <span class="attr">subtree:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">Spatial</span> </span><br><span class="line">          <span class="attr">factors:</span> <span class="string">M=SX</span> <span class="string">L=SY</span></span><br><span class="line">          <span class="attr">split:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">permutation:</span> <span class="string">ML</span></span><br><span class="line">          <span class="attr">target:</span> <span class="string">Cache</span></span><br><span class="line">          <span class="attr">tag:</span> <span class="string">op2</span></span><br><span class="line"></span><br><span class="line">          <span class="attr">subtree:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Tile</span> </span><br><span class="line">            <span class="attr">type:</span> <span class="string">temporal</span> </span><br><span class="line">            <span class="attr">factors:</span> <span class="string">M=1</span> <span class="string">L=1</span> <span class="string">N=1</span> </span><br><span class="line">            <span class="attr">permutation:</span> <span class="string">MLN</span> </span><br><span class="line">            <span class="attr">target:</span> <span class="string">RegFile</span></span><br><span class="line">            <span class="attr">tag:</span> <span class="string">op2</span></span><br><span class="line">            </span><br><span class="line">            <span class="attr">subtree:</span> </span><br><span class="line">            <span class="bullet">-</span> <span class="attr">node-type:</span> <span class="string">Op</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">GEMM2</span></span><br></pre></td></tr></table></figure>
<p>之前tile flow, 可以得到初始化时的一些关键信息:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-----------------Mapping---------------</span><br><span class="line">root: <span class="number">0xa23020</span></span><br><span class="line">read: A B E D update: E </span><br><span class="line"><span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MO), MainMemory</span><br><span class="line">  read: A B E D update: E fill: A B E D write-back: E </span><br><span class="line">  Scope: Sequential&#123;</span><br><span class="line">    read: A B fill: A B </span><br><span class="line">    <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:KO), MainMemory</span><br><span class="line">      <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LO), MainMemory</span><br><span class="line">        read: C A B update: C fill: A B </span><br><span class="line">        <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:KM), Cache</span><br><span class="line">          <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MM), Cache</span><br><span class="line">            <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LI), Cache</span><br><span class="line">              read: C A B update: C fill: C A B write-back: C </span><br><span class="line">              <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-Y), Cache</span><br><span class="line">                <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-X), Cache</span><br><span class="line">                  read: C A B update: C fill: C A B write-back: C </span><br><span class="line">                  <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                    <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                      <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                        read: C A B update: C fill: C A B write-back: C </span><br><span class="line">                        Op: GEMM1(A,B,)-&gt;C</span><br><span class="line"></span><br><span class="line">    read: E D update: E fill: E D write-back: E </span><br><span class="line">    <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LO), MainMemory</span><br><span class="line">      <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:NO), MainMemory</span><br><span class="line">        read: C E D update: E fill: E D write-back: E </span><br><span class="line">        <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LM), Cache</span><br><span class="line">          <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MM), Cache</span><br><span class="line">            <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:NI), Cache</span><br><span class="line">              read: C E D update: E fill: C E D write-back: E </span><br><span class="line">              <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-Y), Cache</span><br><span class="line">                <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-X), Cache</span><br><span class="line">                  read: C E D update: E fill: C E D write-back: E </span><br><span class="line">                  <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                    <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                      <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                        read: C E D update: E fill: C E D write-back: E </span><br><span class="line">                        Op: GEMM2(C,D,)-&gt;E</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">---------------------------------------</span><br><span class="line">constraints:</span><br><span class="line">        KO*KM==<span class="number">4</span>        <span class="comment">#  loopcount constraint for tiling of dim K</span></span><br><span class="line">        LO*LI==<span class="number">512</span>      <span class="comment">#  loopcount constraint for tiling of dim L</span></span><br><span class="line">        MO*MM==<span class="number">32</span>       <span class="comment">#  loopcount constraint for tiling of dim M</span></span><br><span class="line">        LO*LM==<span class="number">32</span>       <span class="comment">#  loopcount constraint for tiling of dim L</span></span><br><span class="line">        MO*MM==<span class="number">32</span>       <span class="comment">#  loopcount constraint for tiling of dim M</span></span><br><span class="line">        NO*NI==<span class="number">64</span>       <span class="comment">#  loopcount constraint for tiling of dim N</span></span><br><span class="line">        (<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>+<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>+<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>)&lt;=<span class="number">3</span>    <span class="comment"># Memory constraint at Tile::op1::RegFile::Temporal</span></span><br><span class="line">        (Max(MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)*Max(LO*LI*<span class="number">1</span>*<span class="number">1</span>,LO*LM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)+MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>*KM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>+KM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>*LI*<span class="number">1</span>*<span class="number">1</span>)&lt;=<span class="number">131072</span>     <span class="comment"># Memory constraint at Tile::op1::Cache::Temporal</span></span><br><span class="line">        (<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>+<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>+<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>*<span class="number">1</span>)&lt;=<span class="number">3</span>    <span class="comment"># Memory constraint at Tile::op2::RegFile::Temporal</span></span><br><span class="line">        (Max(MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)*Max(LO*LI*<span class="number">1</span>*<span class="number">1</span>,LO*LM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)+MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>*NI*<span class="number">1</span>*<span class="number">1</span>+LM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>*NI*<span class="number">1</span>*<span class="number">1</span>)&lt;=<span class="number">131072</span>        <span class="comment"># Memory constraint at Tile::op2::Cache::Temporal</span></span><br><span class="line">        (MO*Max(MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)*Max(KO*KM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,<span class="number">1</span>)+Max(KO*KM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,<span class="number">1</span>)*Max(LO*LI*<span class="number">1</span>*<span class="number">1</span>,LO*LM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)+MO*Max(MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>,MM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)*Max(<span class="number">1</span>,NO*NI*<span class="number">1</span>*<span class="number">1</span>)+Max(LO*LI*<span class="number">1</span>*<span class="number">1</span>,LO*LM*<span class="number">16</span>*<span class="number">1</span>*<span class="number">1</span>)*Max(<span class="number">1</span>,NO*NI*<span class="number">1</span>*<span class="number">1</span>))&lt;=<span class="number">524288</span>   <span class="comment"># Memory constraint at Tile::MainMemory::Temporal</span></span><br><span class="line">        &lt;<span class="number">16</span>, <span class="number">16</span>&gt; &lt;= &lt;<span class="number">16</span>, <span class="number">16</span>&gt;      <span class="comment"># Resource constraint at Tile::op1::Cache::Spatial</span></span><br><span class="line">        &lt;<span class="number">16</span>, <span class="number">16</span>&gt; &lt;= &lt;<span class="number">16</span>, <span class="number">16</span>&gt;      <span class="comment"># Resource constraint at Tile::op2::Cache::Spatial</span></span><br><span class="line">        Max(&lt;<span class="number">1</span>, <span class="number">1</span>&gt;,&lt;<span class="number">1</span>, <span class="number">1</span>&gt;) &lt;= &lt;<span class="number">1</span>, <span class="number">1</span>&gt;      <span class="comment"># Resource constraint at Scope::Sequential</span></span><br><span class="line">==============Checker END================</span><br></pre></td></tr></table></figure>
<p>其实我对于tileflow最好奇的一点是 temporal
buffer是在哪个内存层级申请的, 通过上面这个constraints很好的解释了这一点.
他应该是在每个tile node上都会开buffer,
对于op1在cache上的这个node上设定了c为pypass,
因此他的大小计算为<code>C[MM*16,L]</code>,
而其他两个buffer就是根据factor来计算的:<code>A[MM*16,KM*16]</code>以及<code>B[KM*16,LI]</code>.</p>
<h2 id="执行结果">1.4 执行结果</h2>
<p>这里应该是只搜索了buffer size. <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">***Optimal Mapping:</span><br><span class="line">-----------------Nest Analysis----------------</span><br><span class="line">Tile::MainMemory::Temporal,</span><br><span class="line">strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">128</span> <span class="number">64</span> <span class="number">64</span> <span class="number">512</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">511</span> <span class="number">63</span> <span class="number">63</span> <span class="number">511</span> </span><br><span class="line">read: A B E D update: E </span><br><span class="line"><span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MO(<span class="number">4</span>)), MainMemory</span><br><span class="line">   read: A B E D update: E fill: A B E D write-back: E </span><br><span class="line">   Scope: Sequential</span><br><span class="line">   &#123;</span><br><span class="line">      Tile::op1::MainMemory::Temporal,</span><br><span class="line">      strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">128</span> <span class="number">1</span> <span class="number">32</span> <span class="number">512</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">127</span> <span class="number">0</span> <span class="number">63</span> <span class="number">511</span> </span><br><span class="line">      read: A B fill: A B </span><br><span class="line">      <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:KO(<span class="number">2</span>)), MainMemory</span><br><span class="line">        <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LO(<span class="number">1</span>)), MainMemory</span><br><span class="line">            Tile::op1::Cache::Temporal,</span><br><span class="line">            strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">128</span> <span class="number">1</span> <span class="number">16</span> <span class="number">512</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">127</span> <span class="number">0</span> <span class="number">31</span> <span class="number">511</span> </span><br><span class="line">            read: C A B update: C fill: A B </span><br><span class="line">            <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:KM(<span class="number">2</span>)), Cache</span><br><span class="line">              <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MM(<span class="number">8</span>)), Cache</span><br><span class="line">                <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LI(<span class="number">512</span>)), Cache</span><br><span class="line">                     Tile::op1::Cache::Spatial,</span><br><span class="line">                     strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">16</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">15</span> <span class="number">0</span> <span class="number">15</span> <span class="number">0</span> </span><br><span class="line">                     read: C A B update: C fill: C A B write-back: C </span><br><span class="line">                     <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-Y), Cache</span><br><span class="line">                       <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-X), Cache</span><br><span class="line">                           Tile::op1::RegFile::Temporal,</span><br><span class="line">                           strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line">                           read: C A B update: C fill: C A B write-back: C </span><br><span class="line">                           <span class="keyword">for</span> K <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                             <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                               <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                                    read: C A B update: C fill: C A B write-back: C </span><br><span class="line">                                    Op: GEMM1(A,B,)-&gt;C</span><br><span class="line"></span><br><span class="line">                                    repFactor:<span class="number">0</span></span><br><span class="line">                                    accesses:<span class="number">0</span></span><br><span class="line">                                    expanison:<span class="number">16</span>,<span class="number">16</span></span><br><span class="line">      Tile::op2::MainMemory::Temporal,</span><br><span class="line">      strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">128</span> <span class="number">64</span> <span class="number">1</span> <span class="number">512</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">127</span> <span class="number">63</span> <span class="number">0</span> <span class="number">511</span> </span><br><span class="line">      read: E D update: E fill: E D write-back: E </span><br><span class="line">      <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LO(<span class="number">1</span>)), MainMemory</span><br><span class="line">        <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:NO(<span class="number">1</span>)), MainMemory</span><br><span class="line">            Tile::op2::Cache::Temporal,</span><br><span class="line">            strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">128</span> <span class="number">64</span> <span class="number">1</span> <span class="number">16</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">127</span> <span class="number">63</span> <span class="number">0</span> <span class="number">511</span> </span><br><span class="line">            read: C E D update: E fill: E D write-back: E </span><br><span class="line">            <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:LM(<span class="number">32</span>)), Cache</span><br><span class="line">              <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:MM(<span class="number">8</span>)), Cache</span><br><span class="line">                <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:NI(<span class="number">64</span>)), Cache</span><br><span class="line">                     Tile::op2::Cache::Spatial,</span><br><span class="line">                     strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">16</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">15</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15</span> </span><br><span class="line">                     read: C E D update: E fill: C E D write-back: E </span><br><span class="line">                     <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-Y), Cache</span><br><span class="line">                       <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">16</span>) (Spatial-X), Cache</span><br><span class="line">                           Tile::op2::RegFile::Temporal,</span><br><span class="line">                           strides,low,high:MNKL[<span class="number">4</span>]: <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> ,[<span class="number">4</span>]: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> </span><br><span class="line">                           read: C E D update: E fill: C E D write-back: E </span><br><span class="line">                           <span class="keyword">for</span> N <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                             <span class="keyword">for</span> L <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                               <span class="keyword">for</span> M <span class="keyword">in</span> [<span class="number">0</span>:<span class="number">1</span>), RegFile</span><br><span class="line">                                    read: C E D update: E fill: C E D write-back: E </span><br><span class="line">                                    Op: GEMM2(C,D,)-&gt;E</span><br><span class="line"></span><br><span class="line">                                    repFactor:<span class="number">0</span></span><br><span class="line">                                    accesses:<span class="number">0</span></span><br><span class="line">                                    expanison:<span class="number">16</span>,<span class="number">16</span></span><br><span class="line">   &#125;</span><br><span class="line">Cycle: <span class="number">140288</span>, Energy: <span class="number">4.18771e+08</span></span><br><span class="line">--------------END Nest Analysis---------------</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%9A%E9%9D%A2%E4%BD%93%E6%A8%A1%E5%9E%8B/" rel="tag">多面体模型</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E5%BB%BA%E6%A8%A1/" rel="tag">性能建模</a></li></ul></div><div class="post-nav"><a class="pre" href="/2024/01/11/affine-fusion/">Affine Fusion Pass浅析</a><a class="next" href="/2023/12/26/hf-llama/">hugging face llama使用</a></div><script src="https://utteranc.es/client.js" repo="zhen8838/zhen8838.github.io" issue-term="url" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://zhen8838.github.io"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.png"/></a><p>A Believing Heart Is Your Magic</p><a class="info-icon" href="mailto:597323109@qq.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/zhen8838" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">体系结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/">工具使用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E8%AF%91%E5%99%A8/">编译器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97/">边缘计算</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BF%90%E7%AD%B9%E5%AD%A6/">运筹学</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/%E6%A0%91/" style="font-size: 15px;">树</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/Tensorflow/" style="font-size: 15px;">Tensorflow</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 15px;">树莓派</a> <a href="/tags/%E8%93%9D%E7%89%99/" style="font-size: 15px;">蓝牙</a> <a href="/tags/Matlab/" style="font-size: 15px;">Matlab</a> <a href="/tags/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95/" style="font-size: 15px;">遗传算法</a> <a href="/tags/SVM/" style="font-size: 15px;">SVM</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 15px;">链表</a> <a href="/tags/%E5%8D%8A%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">半监督学习</a> <a href="/tags/GAN/" style="font-size: 15px;">GAN</a> <a href="/tags/%E6%A6%82%E7%8E%87%E8%AE%BA/" style="font-size: 15px;">概率论</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/%E9%A6%99%E6%A9%99%E6%B4%BE/" style="font-size: 15px;">香橙派</a> <a href="/tags/%E8%B8%A9%E5%9D%91%E7%BB%8F%E9%AA%8C/" style="font-size: 15px;">踩坑经验</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/%E5%A4%9A%E9%9D%A2%E4%BD%93%E6%A8%A1%E5%9E%8B/" style="font-size: 15px;">多面体模型</a> <a href="/tags/%E5%90%8E%E7%AB%AF%E4%BC%98%E5%8C%96/" style="font-size: 15px;">后端优化</a> <a href="/tags/Ampl/" style="font-size: 15px;">Ampl</a> <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" style="font-size: 15px;">图像处理</a> <a href="/tags/K210/" style="font-size: 15px;">K210</a> <a href="/tags/%E4%BA%8C%E5%88%86%E6%B3%95/" style="font-size: 15px;">二分法</a> <a href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" style="font-size: 15px;">科学上网</a> <a href="/tags/%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/" style="font-size: 15px;">损失函数</a> <a href="/tags/cmake/" style="font-size: 15px;">cmake</a> <a href="/tags/CPP/" style="font-size: 15px;">CPP</a> <a href="/tags/Conan/" style="font-size: 15px;">Conan</a> <a href="/tags/OrTools/" style="font-size: 15px;">OrTools</a> <a href="/tags/CSharp/" style="font-size: 15px;">CSharp</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA/" style="font-size: 15px;">数据增强</a> <a href="/tags/VAE/" style="font-size: 15px;">VAE</a> <a href="/tags/%E8%81%9A%E7%B1%BB%E6%96%B9%E6%B3%95/" style="font-size: 15px;">聚类方法</a> <a href="/tags/CostModel/" style="font-size: 15px;">CostModel</a> <a href="/tags/Vscode/" style="font-size: 15px;">Vscode</a> <a href="/tags/%E5%A3%B0%E9%9F%B3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/" style="font-size: 15px;">声音信号处理</a> <a href="/tags/TVM/" style="font-size: 15px;">TVM</a> <a href="/tags/%E5%8A%A8%E6%80%81shape/" style="font-size: 15px;">动态shape</a> <a href="/tags/%E4%B8%AD%E7%AB%AF%E4%BC%98%E5%8C%96/" style="font-size: 15px;">中端优化</a> <a href="/tags/Equality-Saturation/" style="font-size: 15px;">Equality Saturation</a> <a href="/tags/stm32/" style="font-size: 15px;">stm32</a> <a href="/tags/Keras/" style="font-size: 15px;">Keras</a> <a href="/tags/Halide/" style="font-size: 15px;">Halide</a> <a href="/tags/DSL/" style="font-size: 15px;">DSL</a> <a href="/tags/%E5%A0%86%E6%A0%88/" style="font-size: 15px;">堆栈</a> <a href="/tags/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/" style="font-size: 15px;">大语言模型</a> <a href="/tags/llama/" style="font-size: 15px;">llama</a> <a href="/tags/%E5%BD%92%E4%B8%80%E5%8C%96/" style="font-size: 15px;">归一化</a> <a href="/tags/Makefile/" style="font-size: 15px;">Makefile</a> <a href="/tags/%E5%85%83%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">元学习</a> <a href="/tags/%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">模板元编程</a> <a href="/tags/mindspore/" style="font-size: 15px;">mindspore</a> <a href="/tags/LLM/" style="font-size: 15px;">LLM</a> <a href="/tags/tvm/" style="font-size: 15px;">tvm</a> <a href="/tags/mlir/" style="font-size: 15px;">mlir</a> <a href="/tags/%E6%80%A7%E8%83%BD%E5%BB%BA%E6%A8%A1/" style="font-size: 15px;">性能建模</a> <a href="/tags/mxnet/" style="font-size: 15px;">mxnet</a> <a href="/tags/Nand2Tetris/" style="font-size: 15px;">Nand2Tetris</a> <a href="/tags/ncnn/" style="font-size: 15px;">ncnn</a> <a href="/tags/Numpy/" style="font-size: 15px;">Numpy</a> <a href="/tags/PCB/" style="font-size: 15px;">PCB</a> <a href="/tags/%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1/" style="font-size: 15px;">姿态估计</a> <a href="/tags/%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/" style="font-size: 15px;">人脸检测</a> <a href="/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E9%87%8F%E5%8C%96/" style="font-size: 15px;">神经网络量化</a> <a href="/tags/Yolo/" style="font-size: 15px;">Yolo</a> <a href="/tags/Pytorch/" style="font-size: 15px;">Pytorch</a> <a href="/tags/NB-IOT/" style="font-size: 15px;">NB-IOT</a> <a href="/tags/Retinaface/" style="font-size: 15px;">Retinaface</a> <a href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" style="font-size: 15px;">目标检测</a> <a href="/tags/%E6%8C%87%E4%BB%A4%E9%9B%86/" style="font-size: 15px;">指令集</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 15px;">排序</a> <a href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/" style="font-size: 15px;">统计学习方法</a> <a href="/tags/%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB/" style="font-size: 15px;">人脸识别</a> <a href="/tags/%E4%BC%98%E5%8C%96%E5%99%A8/" style="font-size: 15px;">优化器</a> <a href="/tags/%E5%90%B4%E6%81%A9%E8%BE%BE%E8%AF%BE%E7%A8%8B/" style="font-size: 15px;">吴恩达课程</a> <a href="/tags/WordCloud/" style="font-size: 15px;">WordCloud</a> <a href="/tags/Zhihu/" style="font-size: 15px;">Zhihu</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/%E5%9B%9B%E8%BD%B4%E9%A3%9E%E8%A1%8C%E5%99%A8/" style="font-size: 15px;">四轴飞行器</a> <a href="/tags/%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/" style="font-size: 15px;">资源汇总</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 15px;">分布式</a> <a href="/tags/%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">无监督学习</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/Jittor/" style="font-size: 15px;">Jittor</a> <a href="/tags/Tiramisu/" style="font-size: 15px;">Tiramisu</a> <a href="/tags/Triton/" style="font-size: 15px;">Triton</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/12/04/triton-cpu-lesson-1/">triton-cpu初体验</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/11/07/mesh-matmul/">分布式存储架构下的矩阵乘与编译器</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/08/mlc-tutorial/">机器学习编译概念科普</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/08/benchmark-notes/">benchmark的经验与技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/06/14/ampl-learn/">Ampl学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/05/08/constraints-solver-internals/">Constraints Solver Internals</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/30/model-driven-optimization/">Model Driven Optimization</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/23/mac-amx/">探索AMX: 解锁Apple Silicon隐藏性能</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/23/mac-amx_en/">Explore AMX instructions: Unlock the performance of Apple Silicon</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/13/macos-bundle/">macos中bundle的使用</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Zheng's Notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>