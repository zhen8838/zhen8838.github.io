<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2021-04-25">

<title>cmakeè¸©å‘&amp;çˆ¬å‘ â€“ Zhengâ€™s Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-8b4baf804e461d9b72633f0de59a0cac.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7072389654d23eff08f359f9aa0d1ee7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Zhengâ€™s Notes</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#cmake-æœ€å°æ¨¡æ¿" id="toc-cmake-æœ€å°æ¨¡æ¿" class="nav-link active" data-scroll-target="#cmake-æœ€å°æ¨¡æ¿">cmake æœ€å°æ¨¡æ¿</a></li>
  <li><a href="#add_subdirectory" id="toc-add_subdirectory" class="nav-link" data-scroll-target="#add_subdirectory">add_subdirectory</a></li>
  <li><a href="#åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶" id="toc-åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶" class="nav-link" data-scroll-target="#åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶">åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶</a></li>
  <li><a href="#macroä½¿ç”¨" id="toc-macroä½¿ç”¨" class="nav-link" data-scroll-target="#macroä½¿ç”¨">macroä½¿ç”¨</a></li>
  <li><a href="#ç©ºæ ¼è¢«è½¬ä¹‰" id="toc-ç©ºæ ¼è¢«è½¬ä¹‰" class="nav-link" data-scroll-target="#ç©ºæ ¼è¢«è½¬ä¹‰">ç©ºæ ¼è¢«è½¬ä¹‰</a></li>
  <li><a href="#æ£€æŸ¥æ­£ç¡®æ€§" id="toc-æ£€æŸ¥æ­£ç¡®æ€§" class="nav-link" data-scroll-target="#æ£€æŸ¥æ­£ç¡®æ€§">æ£€æŸ¥æ­£ç¡®æ€§</a></li>
  <li><a href="#ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–è‡ªå®šä¹‰ç”Ÿæˆ" id="toc-ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–è‡ªå®šä¹‰ç”Ÿæˆ" class="nav-link" data-scroll-target="#ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–è‡ªå®šä¹‰ç”Ÿæˆ">ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–ï¼Œè‡ªå®šä¹‰ç”Ÿæˆ</a></li>
  <li><a href="#cmakeé»˜è®¤targetè¾“å‡ºä½ç½®" id="toc-cmakeé»˜è®¤targetè¾“å‡ºä½ç½®" class="nav-link" data-scroll-target="#cmakeé»˜è®¤targetè¾“å‡ºä½ç½®">cmakeé»˜è®¤targetè¾“å‡ºä½ç½®</a></li>
  <li><a href="#cmakeå¯¼å‡ºpseudo-targetå¹¶è¿›è¡Œè°ƒç”¨" id="toc-cmakeå¯¼å‡ºpseudo-targetå¹¶è¿›è¡Œè°ƒç”¨" class="nav-link" data-scroll-target="#cmakeå¯¼å‡ºpseudo-targetå¹¶è¿›è¡Œè°ƒç”¨">cmakeå¯¼å‡ºpseudo targetï¼Œå¹¶è¿›è¡Œè°ƒç”¨</a></li>
  <li><a href="#cmakeå®‰è£…targetè®¾ç½®å…¶åå­—" id="toc-cmakeå®‰è£…targetè®¾ç½®å…¶åå­—" class="nav-link" data-scroll-target="#cmakeå®‰è£…targetè®¾ç½®å…¶åå­—">cmakeå®‰è£…targetè®¾ç½®å…¶åå­—</a></li>
  <li><a href="#cmakeå®‰è£…ç›®å½•è·¯å¾„" id="toc-cmakeå®‰è£…ç›®å½•è·¯å¾„" class="nav-link" data-scroll-target="#cmakeå®‰è£…ç›®å½•è·¯å¾„">cmakeå®‰è£…ç›®å½•è·¯å¾„</a></li>
  <li><a href="#cmakeå‡½æ•°è¿”å›å€¼" id="toc-cmakeå‡½æ•°è¿”å›å€¼" class="nav-link" data-scroll-target="#cmakeå‡½æ•°è¿”å›å€¼">cmakeå‡½æ•°è¿”å›å€¼</a></li>
  <li><a href="#cmakeå†™å…¥å¤šè¡Œinclude" id="toc-cmakeå†™å…¥å¤šè¡Œinclude" class="nav-link" data-scroll-target="#cmakeå†™å…¥å¤šè¡Œinclude">cmakeå†™å…¥å¤šè¡Œinclude</a></li>
  <li><a href="#cmakeè·å–target-çš„library-path" id="toc-cmakeè·å–target-çš„library-path" class="nav-link" data-scroll-target="#cmakeè·å–target-çš„library-path">cmakeè·å–target çš„library path</a></li>
  <li><a href="#undefined-reference-to-pthread_create" id="toc-undefined-reference-to-pthread_create" class="nav-link" data-scroll-target="#undefined-reference-to-pthread_create">undefined reference to `pthread_createâ€™</a></li>
  <li><a href="#macosä¸­çš„rpathé—®é¢˜" id="toc-macosä¸­çš„rpathé—®é¢˜" class="nav-link" data-scroll-target="#macosä¸­çš„rpathé—®é¢˜">macosä¸­çš„rpathé—®é¢˜</a></li>
  <li><a href="#conanæ”¯æŒriscv" id="toc-conanæ”¯æŒriscv" class="nav-link" data-scroll-target="#conanæ”¯æŒriscv">conanæ”¯æŒriscv</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">cmakeè¸©å‘&amp;çˆ¬å‘</h1>
  <div class="quarto-categories">
    <div class="quarto-category">ç¼–ç¨‹è¯­è¨€</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 25, 2021</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>æœ€è¿‘å®ä¹ äº†ï¼Œæ¯å¤©éƒ½è¦å’Œcmakeæ‰“äº¤é“ï¼Œè®°å½•ä¸€äº›æ—¶å¸¸è¦ç”¨çš„ä¸œè¥¿å’Œé‡åˆ°çš„é—®é¢˜ã€‚</p>
<!--more-->
<section id="cmake-æœ€å°æ¨¡æ¿" class="level2">
<h2 class="anchored" data-anchor-id="cmake-æœ€å°æ¨¡æ¿">cmake æœ€å°æ¨¡æ¿</h2>
<pre><code>cmake_minimum_required(VERSION 3.9)
project(xxx)
 
 
#è®¾å®šç¼–è¯‘å‚æ•°
set(CMAKE_CXX_STANDARD 11)
 
#è®¾å®šæºç åˆ—è¡¨.cpp
aux_source_directory(&lt;dir&gt; &lt;variable&gt;)
#æ¯”å¦‚:aux_source_directory(${CMAKE_SOURCE_DIR} DIR)  

 
#è®¾å®šå¤´æ–‡ä»¶è·¯å¾„
include_directories(../include/)
#include_directories("è·¯å¾„1" &nbsp;â€œè·¯å¾„2â€...)
 
 
#è®¾å®šé“¾æ¥åº“çš„è·¯å¾„ï¼ˆä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸‰æ–¹éç³»ç»Ÿç›®å½•ä¸‹çš„åº“ï¼‰
link_directories(../build/)
#link_directories("è·¯å¾„1" &nbsp;â€œè·¯å¾„2â€...)
 
 
#æ·»åŠ å­ç›®å½•,ä½œç”¨ç›¸å½“äºè¿›å…¥å­ç›®å½•é‡Œé¢ï¼Œå±•å¼€å­ç›®å½•çš„CMakeLists.txt
#åŒæ—¶æ‰§è¡Œï¼Œå­ç›®å½•ä¸­çš„CMakeLists.txtä¸€èˆ¬æ˜¯ç¼–è¯‘æˆä¸€ä¸ªåº“ï¼Œä½œä¸ºä¸€ä¸ªæ¨¡å—
#åœ¨çˆ¶ç›®å½•ä¸­å¯ä»¥ç›´æ¥å¼•ç”¨å­ç›®å½•ç”Ÿæˆçš„åº“
#add_subdirectory(math)
 
 
#ç”ŸæˆåŠ¨/é™æ€åº“
#add_library(åŠ¨/é™æ€é“¾æ¥åº“åç§°  SHARED/STATIC(å¯é€‰ï¼Œé»˜è®¤STATIC)  æºç åˆ—è¡¨)
#å¯ä»¥å•ç‹¬ç”Ÿæˆå¤šä¸ªæ¨¡å—
 
 
#ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
add_executable(myLevealDB &nbsp; ${SOURCE_FILES} )
#æ¯”å¦‚ï¼šadd_executable(hello_world &nbsp; &nbsp;${SOURCE_FILES})
 
 
target_link_libraries(xxx pthred glog)#å°±æ˜¯g++ ç¼–è¯‘é€‰é¡¹ä¸­-låçš„å†…å®¹ï¼Œä¸è¦æœ‰å¤šä½™ç©ºæ ¼
 
# ADD_CUSTOM_COMMAND( #æ‰§è¡Œshellå‘½ä»¤
#           TARGET myLevelDB 
#           POST_BUILD #åœ¨ç›®æ ‡æ–‡ä»¶myLevelDBbuildä¹‹åï¼Œæ‰§è¡Œä¸‹é¢çš„æ‹·è´å‘½ä»¤ï¼Œè¿˜å¯ä»¥é€‰æ‹©PRE_BUILDå‘½ä»¤å°†
# ä¼šåœ¨å…¶ä»–ä¾èµ–é¡¹æ‰§è¡Œå‰æ‰§è¡Œ  PRE_LINKå‘½ä»¤å°†ä¼šåœ¨å…¶ä»–ä¾èµ–é¡¹æ‰§è¡Œå®Œåæ‰§è¡Œ  POST_BUILDå‘½ä»¤å°†ä¼šåœ¨ç›®# æ ‡æ„å»ºå®Œåæ‰§è¡Œã€‚
#           COMMAND cp ./myLevelDB  ../
# )</code></pre>
</section>
<section id="add_subdirectory" class="level2">
<h2 class="anchored" data-anchor-id="add_subdirectory">add_subdirectory</h2>
<p>ç”¨<code>add_subdirectory</code>å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ§åˆ¶æ˜¯å¦ç¼–è¯‘å­ç›®å½•ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†æµ‹è¯•ä»£ç æ”¾åˆ°<code>test</code>ä¸­ï¼Œåœ¨æ ¹ç›®å½•çš„cmakelisté‡Œé¢é€‰æ‹©æ˜¯å¦ç¼–è¯‘å•å…ƒæµ‹è¯•æ–‡ä»¶ã€‚</p>
</section>
<section id="åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶" class="level2">
<h2 class="anchored" data-anchor-id="åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶">åˆ©ç”¨é€šé…ç¬¦æ‰¾åˆ°æºæ–‡ä»¶</h2>
<pre><code>file(GLOB SOURCE_FILES ${CMAKE_SOURCE_DIR}/test_*.cpp)
add_executable(cpp_test ${SOURCE_FILES})</code></pre>
</section>
<section id="macroä½¿ç”¨" class="level2">
<h2 class="anchored" data-anchor-id="macroä½¿ç”¨">macroä½¿ç”¨</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>å˜é‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ARGV#</td>
<td># æ˜¯ä¸€ä¸ªä¸‹æ ‡ï¼Œ0 æŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç´¯åŠ </td>
</tr>
<tr class="even">
<td>ARGV</td>
<td>æ‰€æœ‰çš„å®šä¹‰æ—¶è¦æ±‚ä¼ å…¥çš„å‚æ•°</td>
</tr>
<tr class="odd">
<td>ARGN</td>
<td>å®šä¹‰æ—¶è¦æ±‚ä¼ å…¥çš„å‚æ•°ä»¥å¤–çš„å‚æ•°åˆ—è¡¨</td>
</tr>
<tr class="even">
<td>ARGC</td>
<td>ä¼ å…¥çš„å®é™…å‚æ•°çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨å‡½æ•°æ˜¯ä¼ å…¥çš„å‚æ•°ä¸ªæ•°</td>
</tr>
</tbody>
</table>
<p>å½“è¦æ”¶é›†é¢å¤–å‚æ•°çš„æ—¶å€™ï¼Œä¸èƒ½ç›´æ¥åœ¨å®çš„å…¥å£å¤„å†™å‚æ•°ï¼Œå› ä¸ºé‚£é‡Œçš„å‚æ•°æ˜¯å¿…é¡»ä¼ å…¥çš„ï¼Œåªèƒ½ç›´æ¥ä¼ å…¥ç„¶åç”¨ifè¿›è¡Œè§£æã€‚</p>
<pre><code>macro(add_code name)
    if(${ARGC} GREATER 2)
        set(gen_name ${ARGV1})
        set(gen_variable ${ARGV2})
    else()
        set(gen_name ${name})
        set(gen_variable "")
    endif()
    add_custom_target(gen_${name} 
        COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/gen_all -g halide_${name} -n halide_${gen_name} -o ${CMAKE_CURRENT_SOURCE_DIR}/kernels -e c_header,assembly,schedule,stmt_html target=host-no_asserts-no_bounds_query "${gen_variable}")
    add_dependencies(gen_${name} gen_all)
endmacro()</code></pre>
</section>
<section id="ç©ºæ ¼è¢«è½¬ä¹‰" class="level2">
<h2 class="anchored" data-anchor-id="ç©ºæ ¼è¢«è½¬ä¹‰">ç©ºæ ¼è¢«è½¬ä¹‰</h2>
<p>æˆ‘æƒ³è¾“å…¥ä¸€ä¸ªå‚æ•°ä¸º<code>"kernel_width=3 kernel_height=3"</code>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯æˆ‘å‘ç°æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code>kernel_width=3\ kernel_height=3</code></pre>
<p>è¿™ä¸ªæ˜¯å› ä¸ºcmakeä¸ºäº†åŒºåˆ«äºä»–å¤šä¸ªå˜é‡èµ‹å€¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªæ–¹å¼è§£å†³</p>
<pre><code>set(testfiles "test1" "test2") \\ 1. ç›´æ¥å¤šä¸ªå˜é‡èµ‹å€¼
set(testfiles "kernel_width=3;kernel_height=3") \\ 2. ä½¿ç”¨åˆ†å·éš”å¼€</code></pre>
</section>
<section id="æ£€æŸ¥æ­£ç¡®æ€§" class="level2">
<h2 class="anchored" data-anchor-id="æ£€æŸ¥æ­£ç¡®æ€§">æ£€æŸ¥æ­£ç¡®æ€§</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦æ£€æŸ¥cmakeçš„å†…éƒ¨å˜é‡æ˜¯ä¸æ˜¯æœ‰é”™è¯¯ï¼Œè¦åŠ messageæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š</p>
<pre><code>make VERBOSE=1 </code></pre>
</section>
<section id="ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–è‡ªå®šä¹‰ç”Ÿæˆ" class="level2">
<h2 class="anchored" data-anchor-id="ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–è‡ªå®šä¹‰ç”Ÿæˆ">ä¸ºæŸä¸ªæ–‡ä»¶æ·»åŠ ä¾èµ–ï¼Œè‡ªå®šä¹‰ç”Ÿæˆ</h2>
<p>ä½¿ç”¨custom commandï¼Œç„¶åæŠŠç”Ÿæˆçš„srcæ·»åŠ åˆ°ä¸€ä¸ªæ–°çš„çš„targetä¸­ï¼Œç„¶åç›®æ ‡targetä¾èµ–è¿™ä¸ªtargetã€‚ è¦æ³¨æ„ï¼Œæˆ‘ä»¬ç”Ÿæˆçš„æºæ–‡ä»¶ä¸èƒ½ç›´æ¥åŠ åˆ°ç›®æ ‡targetä¸­ï¼Œå› ä¸ºä¸€å¼€å§‹æ²¡æœ‰ç”Ÿæˆä»£ç ï¼Œä¼šå¯¼è‡´cmake configå‡ºé”™ï¼Œå¾—æ‰¾æ‰¾æ–¹æ³•å»è§£å†³ä¸€ä¸‹ã€‚</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode cmake code-with-copy"><code class="sourceCode cmake"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">add_custom_command</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">OUTPUT</span> testData.cpp</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="ot">COMMAND</span> reswrap </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="ot">ARGS</span>    testData.src &gt; testData.cpp</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">DEPENDS</span> testData.src </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="kw">add_custom_target</span>(<span class="bn">evaluator_k510.update</span> <span class="ot">SOURCES</span> <span class="dv">${KERNEL_SRCS}</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">add_dependencies</span>(<span class="bn">evaluator_k510</span> <span class="bn">evaluator_k510.update</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>å¦‚æœæ˜¯åœ¨æ²¡æœ‰ä¾èµ–ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå·±åŠ ä¸ª<code>dummy.cpp</code>ç„¶åå¼ºåˆ¶æŠŠéœ€è¦ç”Ÿæˆçš„æ–‡ä»¶ç»™æ·»åŠ ä¸Š</p>
</section>
<section id="cmakeé»˜è®¤targetè¾“å‡ºä½ç½®" class="level2">
<h2 class="anchored" data-anchor-id="cmakeé»˜è®¤targetè¾“å‡ºä½ç½®">cmakeé»˜è®¤targetè¾“å‡ºä½ç½®</h2>
<p>åœ¨ç¼–è¯‘æ—¶é€šè¿‡<code>add_executable()</code>ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥åŠåˆ©ç”¨<code>add_library( SHARED )</code>çš„æ–‡ä»¶ï¼Œé»˜è®¤è¾“å‡ºåˆ°<code>CMAKE_RUNTIME_OUTPUT_DIRECTORY</code>ï¼Œé€šå¸¸æ˜¯<code>build/bin</code>ç›®å½•ã€‚</p>
</section>
<section id="cmakeå¯¼å‡ºpseudo-targetå¹¶è¿›è¡Œè°ƒç”¨" class="level2">
<h2 class="anchored" data-anchor-id="cmakeå¯¼å‡ºpseudo-targetå¹¶è¿›è¡Œè°ƒç”¨">cmakeå¯¼å‡ºpseudo targetï¼Œå¹¶è¿›è¡Œè°ƒç”¨</h2>
<p>æˆ‘é¦–å…ˆç”¨<code>add_custom_command</code>ç”Ÿæˆäº†ä¸€ä¸ªlibï¼Œä½†æ˜¯è¿™ä¸ªlibä¸æ˜¯cmakeæ„å»ºçš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¢«cmakeè°ƒç”¨ï¼Œå¹¶ä¸”å¦‚æœä»–æ˜¯ä¸€ä¸ªlibï¼Œå¿…é¡»è¦å…ˆå†™ä¸ª<code>add_library</code>åˆ¶ä½œä¸€ä¸ªä¼ªç›®æ ‡ï¼Œç„¶åå†æŠŠä»–çœŸå®çš„libæ·»åŠ ä¸Šå»ï¼Œç„¶åæ‰èƒ½æ­£å¸¸ä½¿ç”¨è¿™ä¸ªtargetã€‚</p>
<pre><code>add_library(hkg_${os_name}_runtime INTERFACE)
target_link_libraries(hkg_${os_name}_runtime INTERFACE ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/halide_runtime_${os_name}.${suffix} -ldl)
add_library(hkg::${os_name}_runtime ALIAS hkg_${os_name}_runtime)</code></pre>
<p>æ›´åŠ å¤æ‚çš„ä¾‹å­åœ¨è¿™é‡Œ<code>https://cmake.org/cmake/help/latest/manual/cmake-buildsystem.7.html#interface-libraries</code></p>
</section>
<section id="cmakeå®‰è£…targetè®¾ç½®å…¶åå­—" class="level2">
<h2 class="anchored" data-anchor-id="cmakeå®‰è£…targetè®¾ç½®å…¶åå­—">cmakeå®‰è£…targetè®¾ç½®å…¶åå­—</h2>
<p>å½“æˆ‘ä»¬è®¾ç½®è‡ªå®šä¹‰ç›®æ ‡çš„æ—¶å€™ï¼Œç”¨åˆ«å<code>ALIAS</code>å¯ä»¥æŒ‡å®šåœ¨æ•´ä¸ªæ„å»ºè¿‡ç¨‹ä¸­çš„targetçš„ä½¿ç”¨åå­—ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªtargetéœ€è¦å¯¼å‡ºï¼ˆä¹Ÿå°±æ˜¯è¢«ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨æ—¶ï¼‰ï¼Œä»–çš„åå­—è¿˜å¾—ä½¿ç”¨<code>set_target_properties</code>è®¾ç½®ä¸€ä¸‹ã€‚</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode cmake code-with-copy"><code class="sourceCode cmake"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">add_library</span>(<span class="bn">Halide::Generator</span> <span class="ot">ALIAS</span> <span class="bn">Halide_Generator</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">set_target_properties</span>(<span class="bn">Halide_Generator</span> <span class="ot">PROPERTIES</span> <span class="ot">EXPORT_NAME</span> Generator)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="cmakeå®‰è£…ç›®å½•è·¯å¾„" class="level2">
<h2 class="anchored" data-anchor-id="cmakeå®‰è£…ç›®å½•è·¯å¾„">cmakeå®‰è£…ç›®å½•è·¯å¾„</h2>
<p>cmakeçœŸçš„å¤„å¤„æ˜¯å‘ï¼Œå¦‚æœæƒ³installä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ä¸œè¥¿ï¼Œé‚£ä¹ˆå¿…é¡»è¿™æ ·å†™:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode cmake code-with-copy"><code class="sourceCode cmake"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">install</span>(<span class="ot">DIRECTORY</span> include/</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>            <span class="ot">DESTINATION</span> include)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>å¦‚æœå°‘äº†ä¸€ä¸ª<code>/</code>å®‰è£…åå°±ä¼šå‡ºç°<code>include/include</code>çš„æƒ…å†µ</p>
</section>
<section id="cmakeå‡½æ•°è¿”å›å€¼" class="level2">
<h2 class="anchored" data-anchor-id="cmakeå‡½æ•°è¿”å›å€¼">cmakeå‡½æ•°è¿”å›å€¼</h2>
<p>cmakeé‡Œé¢æ˜¯æ²¡æœ‰å‡½æ•°è¿”å›å€¼çš„ï¼Œæ‰€ä»¥å¿…é¡»è¦åœ¨å‡½æ•°ä¸­è®¾ç½®å˜é‡çš„å€¼ï¼ŒåŒæ—¶æŒ‡å®šä»–çš„scopeï¼ŒåŒæ—¶è¿˜éœ€è¦æ³¨æ„è®¾ç½®å˜é‡çš„å†™æ³•ã€‚æˆ–è€…è¯´ä¼ é€’å˜é‡çš„åå­—ç„¶åç”¨${name}çš„æ–¹æ³•å®Œæˆäº†cä¸­ç±»ä¼¼æŒ‡é’ˆçš„åŠŸèƒ½ğŸ¤£ã€‚</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode cmake code-with-copy"><code class="sourceCode cmake"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FUNCTION</span>(MY_FUNC_WITH_RET ret)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The following line works by accident if the name of variable in the parent</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is the same as in the function</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SET</span>(ret <span class="st">"in function"</span> <span class="ot">PARENT_SCOPE</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This is the correct way to get the variable name passed to the function</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SET</span>(<span class="dv">${ret}</span> <span class="st">"in function"</span> <span class="ot">PARENT_SCOPE</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ENDFUNCTION</span>()</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="kw">SET</span>(ret <span class="st">"before function"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">MY_FUNC_WITH_RET</span>(ret)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="kw">MESSAGE</span>(<span class="st">"output from function = </span><span class="dv">${ret}</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="cmakeå†™å…¥å¤šè¡Œinclude" class="level2">
<h2 class="anchored" data-anchor-id="cmakeå†™å…¥å¤šè¡Œinclude">cmakeå†™å…¥å¤šè¡Œinclude</h2>
<p>è¿˜æ˜¯åˆ©ç”¨configure_fileï¼Œä¸è¿‡éœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†æ¯”è¾ƒå¤šçš„ä¸œè¥¿</p>
<p>ç®€å•æµ‹è¯•ï¼Œåœ¨.h.inæ–‡ä»¶ä¸­æ·»åŠ <code>@linux_include_list@</code>å—ä¹‹åæ‰§è¡Œcmakeï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„includeäº†ã€‚</p>
<pre><code>cmake_minimum_required(VERSION 3.20)
project(fuck)
set(base_name "conv2d")
set(os_name "linux")
set(header_list "")
list(APPEND feature_list 
    "avx512" 
    "avx2" 
    "sse41" 
    "bare")
list(APPEND full_feature_list 
    "-sse41-avx-f16c-fma-avx2-avx512" 
    "-avx-avx2-f16c-fma-sse41"
    "-avx-f16c-sse41"
    "")

foreach(feature full_feature IN ZIP_LISTS feature_list full_feature_list)
    message("${feature} ${full_feature}")
    list(APPEND header_list "${base_name}-${os_name}-${feature}.h")
endforeach()

set(linux_include_list "")
foreach(header IN LISTS header_list)
    set(linux_include_list "${linux_include_list}\r\n#include \"${header}\"")
endforeach()


# set(linux_include_list ${header_list})
set(windows_include_list ${header_list})
set(osx_include_list ${header_list})



configure_file(src/conv2d.h.in ${CMAKE_SOURCE_DIR}/src/conv2d.h)</code></pre>
</section>
<section id="cmakeè·å–target-çš„library-path" class="level2">
<h2 class="anchored" data-anchor-id="cmakeè·å–target-çš„library-path">cmakeè·å–target çš„library path</h2>
<p>æˆ‘é‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„bugï¼Œå°±æ˜¯ä½¿ç”¨<code>add_library</code>æ·»åŠ äº†ä¸€ç»„linkçš„å¯¹è±¡æ¥å£ä¹‹åï¼Œè¢«é“¾æ¥çš„åº“æ²¡æœ‰è¢«æ­£ç¡®å†™å…¥åˆ°targetä¸­ï¼Œä½†æ˜¯cmakeåˆæ— æ³•è°ƒè¯•ï¼Œæ‰€ä»¥åªèƒ½ä»targetä¸­è·å–å±æ€§å†æ‰“å°å‡ºæ¥çœ‹çœ‹ï¼Œå› ä¸ºæˆ‘çš„link libraryæ˜¯interfaceçš„æ¨¡å¼ï¼Œæ‰€ä»¥è¦è·å–interfaceçš„property</p>
<pre><code>get_target_property(OUT hkg_linux_src INTERFACE_LINK_LIBRARIES)
message(STATUS ${OUT})</code></pre>
<p>ç„¶åæˆ‘å°±å‘ç°äº†é—®é¢˜ï¼Œå³æˆ‘ä»¬åœ¨ç¼–å†™<code>target_link_libraries</code>çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½æ˜¯rawæ¨¡å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸éœ€è¦åŠ ä¸ŠåŒå¼•å·ï¼Œæˆ‘åŸæ¥çš„å†™æ³•å¦‚ä¸‹</p>
<pre><code>target_link_libraries(hkg_linux_src INTERFACE $&lt;BUILD_INTERFACE:"${LINUX_SRCS}"&gt;
    $&lt;INSTALL_INTERFACE:"${LINUX_SRCS}"&gt;)</code></pre>
<p>åˆ™ä»–çš„è¾“å‡ºä¸º</p>
<pre><code>$&lt;BUILD_INTERFACE:"/home/workspace/kernels_generator/include/hkg/generated_kernels/halide_conv2d_7x7_linux_bare.o"&gt;</code></pre>
<p>è€Œè¿™é‡Œé¢çš„å­—ç¬¦ä¸²æ˜¯åŸå°ä¸åŠ¨çš„å†™å…¥åˆ°target_link_librariesä¸­çš„ï¼Œæ­¤æ—¶å¤šäº†çš„åŒå¼•å·å°±æ˜¯å¼•èµ·é”™è¯¯çš„æ ¹æºäº†ã€‚</p>
<p>æ‰€ä»¥éœ€è¦è¿™æ ·å†™ï¼Œå°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜äº†ã€‚</p>
<pre><code>target_link_libraries(hkg_linux_src INTERFACE $&lt;BUILD_INTERFACE:${LINUX_SRCS}&gt;
    $&lt;INSTALL_INTERFACE:${LINUX_SRCS}&gt;)</code></pre>
</section>
<section id="undefined-reference-to-pthread_create" class="level2">
<h2 class="anchored" data-anchor-id="undefined-reference-to-pthread_create">undefined reference to `pthread_createâ€™</h2>
<p>è¿™ä¸ªé—®é¢˜ä¹Ÿè€å¥‡æ€ªäº†ï¼Œæ˜æ˜æ·»åŠ äº†<code>-lphread</code>ä½†æ˜¯è¿˜æ˜¯æŠ¥é”™ï¼Œå‘ç°è¦ä½¿ç”¨<code>-phread</code>æ‰å¯ä»¥ã€‚</p>
</section>
<section id="macosä¸­çš„rpathé—®é¢˜" class="level2">
<h2 class="anchored" data-anchor-id="macosä¸­çš„rpathé—®é¢˜">macosä¸­çš„rpathé—®é¢˜</h2>
<p>RPATHå°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶å¯»æ‰¾ä»–åŠ¨æ€é“¾æ¥åº“çš„è·¯å¾„,åœ¨linuxä¸­,å¤§å¤šæ•°å‘½ä»¤éƒ½æ˜¯ä»¥ä»¥ä¸‹é¡ºåºå»æœç´¢åŠ¨æ€é“¾æ¥åº“çš„</p>
<ol type="1">
<li>RPATH</li>
<li>LD_LIBRARY_PATH</li>
<li>RUNPATH</li>
<li>/etc/ld.so.conf</li>
<li>builtin directories</li>
</ol>
<p>é€šå¸¸æˆ‘ä»¬è®¾ç½®LD_LIBRARY_PATHä¸ºç»™å¯æ‰§è¡Œç¨‹åºæä¾›åº“çš„è·¯å¾„,ä½†æ˜¯å¦‚æœæœ‰åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„åº“éƒ½åœ¨è·¯å¾„ä¸­,åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦é“¾æ¥ä¸åŒç‰ˆæœ¬çš„åº“,é‚£åº”è¯¥æ€ä¹ˆåŠ? è¿™æ—¶å€™å°±éœ€è¦è®¾ç½®RPATHæˆ–è€…RUNPATH,æä¾›ä¸€ä¸ªæŒ‡å®šçš„è·¯å¾„/</p>
<p>ä½†æ˜¯macosçš„æƒ…å†µæœ‰äº›ä¸åŒ,ä»–çš„è¿æ¥å™¨ dyld ä½¿ç”¨æ¯ä¸ª dylib çš„å®Œæ•´è·¯å¾„æ¥å®šä½ä¾èµ–çš„åŠ¨æ€åº“ã€‚</p>
<p>å¯æ‰§è¡Œæ–‡ä»¶ä¸­ç”¨å®Œæ•´è·¯å¾„è®°å½•ä»–çš„ä¾èµ–åº“:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">â¯</span> otool <span class="at">-L</span> bin/can_use_target.generator</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bin/can_use_target.generator:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">/usr/lib/libSystem.B.dylib</span> <span class="er">(</span><span class="ex">compatibility</span> version 1.0.0, current version 1292.100.5<span class="kw">)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="ex">/usr/lib/libc++.1.dylib</span> <span class="er">(</span><span class="ex">compatibility</span> version 1.0.0, current version 905.6.0<span class="kw">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="conanæ”¯æŒriscv" class="level2">
<h2 class="anchored" data-anchor-id="conanæ”¯æŒriscv">conanæ”¯æŒriscv</h2>
<p>æˆ‘ä»Šå¤©æ‰å‘ç°Conan buildçš„æ—¶å€™æ²¡æœ‰æŒ‰ç…§ç¼–è¯‘å™¨é€‰æ‹©å¯¹åº”çš„arch,ç„¶åçœ‹äº†ä¸€ä¸‹,ä»–ä»¬å®˜æ–¹å±…ç„¶éƒ½æ²¡æœ‰åšrvçš„æ”¯æŒ. ä»–å¯é€‰çš„settingä¸­æ²¡æœ‰rvè¿™ä¸ªå¹³å°. æœ€ç»ˆçš„cmakeä¸­çš„ä¿®æ”¹å¦‚ä¸‹:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode cmake code-with-copy"><code class="sourceCode cmake"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span>(TARGET_ARCH x86_64)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(ENABLE_K510_RUNTIME <span class="ot">AND</span> BUILDING_TEST)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># </span><span class="al">NOTE</span><span class="co"> you need add `riscv64` in `~/.conan/settings.yml` `arch, arch_build, arch_target` item.</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># refer from https://github.com/conan-io/cmake-conan/issues/307</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span>(TARGET_ARCH <span class="st">"riscv64"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">endif</span>()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">conan_cmake_run</span>(BASIC_SETUP</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                    CONANFILE conanfile-runtime.txt</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>                    SETTINGS compiler.cppstd=17</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>                    BUILD missing</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>                    ARCH <span class="dv">${TARGET_ARCH}</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>                    ENV CC=<span class="dv">${CMAKE_C_COMPILER}</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>                    ENV CXX=<span class="dv">${CMAKE_CXX_COMPILER}</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>                    ENV CFLAGS=<span class="dv">${CMAKE_C_FLAGS}</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                    ENV CXXFLAGS=<span class="dv">${CMAKE_CXX_FLAGS}</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">include</span>(<span class="dv">${CMAKE_BINARY_DIR}</span>/conan_paths.cmake)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/zhen8838\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="zhen8838/zhen8838.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>