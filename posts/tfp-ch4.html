<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2019-07-28">

<title>æ¦‚ç‡æ¨¡å‹ç¬¬å››ç«  ï¼š å¤§æ•°å®šç† â€“ Zhengâ€™s Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-8b4baf804e461d9b72633f0de59a0cac.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7072389654d23eff08f359f9aa0d1ee7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Zhengâ€™s Notes</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#probabilistic-programming-and-bayesian-methods-for-hackers-chapter-4" id="toc-probabilistic-programming-and-bayesian-methods-for-hackers-chapter-4" class="nav-link active" data-scroll-target="#probabilistic-programming-and-bayesian-methods-for-hackers-chapter-4">Probabilistic Programming and Bayesian Methods for Hackers Chapter 4</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">æ¦‚ç‡æ¨¡å‹ç¬¬å››ç«  ï¼š å¤§æ•°å®šç†</h1>
  <div class="quarto-categories">
    <div class="quarto-category">æœºå™¨å­¦ä¹ </div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 28, 2019</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Tensorflow æ¦‚ç‡æ¨¡å‹å­¦ä¹ ï¼Œä»£ç è¿è¡Œäº<code>Tensorflow 1.14</code>ï¼Œæ–‡å­—åŠæœºå™¨ç¿»è¯‘ã€‚</p>
<!--more-->
<section id="probabilistic-programming-and-bayesian-methods-for-hackers-chapter-4" class="level1">
<h1>Probabilistic Programming and Bayesian Methods for Hackers Chapter 4</h1>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td>### Table of Contents - Dependencies &amp; Prerequisites - The greatest theorem never told - The Law of Large Numbers - Intuition - How do we compute <span class="math inline">\(Var(Z)\)</span> though? - Expected values and probabilities - What does this all have to do with Bayesian statistics? - The Disorder of Small Numbers - Example: Aggregated geographic data - Example: Kaggleâ€™s U.S. Census Return Rate Challenge - Example: How to order Reddit submissions - Setting up the Praw Reddit API - Register your Application on Reddit - Reddit API Setup - Sorting! - But this is too slow for real-time! - Extension to Starred rating systems - Example: Counting Github stars - Conclusion - Appendix - Exercises - Kicker Careers Ranked by Make Percentage - Average Household Income by Programming Language - References</td>
</tr>
<tr class="even">
<td>______</td>
</tr>
<tr class="odd">
<td>```python #<span class="citation" data-cites="title">@title</span> Imports and Global Variables { display-mode: â€œformâ€ } â€œâ€œâ€ The book uses a custom matplotlibrc file, which provides the unique styles for matplotlib plots. If executing this book, and you wish to use the bookâ€™s styling, provided are two options: 1. Overwrite your own matplotlibrc file with the rc-file provided in the bookâ€™s styles/ dir. See http://matplotlib.org/users/customizing.html 2. Also in the styles is bmh_matplotlibrc.json file. This can be used to update the styles in only this notebook. Try running the following code:</td>
</tr>
<tr class="even">
<td>import json s = json.load(open(â€œ../styles/bmh_matplotlibrc.jsonâ€)) matplotlib.rcParams.update(s) â€œâ€œâ€ from <strong>future</strong> import absolute_import, division, print_function</td>
</tr>
<tr class="odd">
<td>#<span class="citation" data-cites="markdown">@markdown</span> This sets the warning status (default is <code>ignore</code>, since this notebook runs correctly) warning_status = â€œignoreâ€ #<span class="citation" data-cites="param">@param ["ignore", "always", "module", "once", "default", "error"]</span> import warnings warnings.filterwarnings(warning_status) with warnings.catch_warnings(): warnings.filterwarnings(warning_status, category=DeprecationWarning) warnings.filterwarnings(warning_status, category=UserWarning)</td>
</tr>
<tr class="even">
<td>import numpy as np import os #<span class="citation" data-cites="markdown">@markdown</span> This sets the styles of the plotting (default is styled like plots from <a href="https://fivethirtyeight.com/">FiveThirtyeight.com</a>) matplotlib_style = â€˜fivethirtyeightâ€™ #<span class="citation" data-cites="param">@param ['fivethirtyeight', 'bmh', 'ggplot', 'seaborn', 'default', 'Solarize_Light2', 'classic', 'dark_background', 'seaborn-colorblind', 'seaborn-notebook']</span> import matplotlib.pyplot as plt; plt.style.use(matplotlib_style) import matplotlib.axes as axes; from matplotlib.patches import Ellipse from mpl_toolkits.mplot3d import Axes3D import pandas_datareader.data as web %matplotlib inline import seaborn as sns; sns.set_context(â€˜notebookâ€™) from IPython.core.pylabtools import figsize #<span class="citation" data-cites="markdown">@markdown</span> This sets the resolution of the plot outputs (<code>retina</code> is the highest resolution) notebook_screen_res = â€˜retinaâ€™ #<span class="citation" data-cites="param">@param ['retina', 'png', 'jpeg', 'svg', 'pdf']</span> %config InlineBackend.figure_format = notebook_screen_res plt.rcParams[â€˜font.sans-serifâ€™]=[â€˜YaHei Consolas Hybridâ€™] import tensorflow as tf tfe = tf.contrib.eager</td>
</tr>
<tr class="odd">
<td># Eager Execution #<span class="citation" data-cites="markdown">@markdown</span> Check the box below if you want to use <a href="https://www.tensorflow.org/guide/eager">Eager Execution</a> #<span class="citation" data-cites="markdown">@markdown</span> Eager execution provides An intuitive interface, Easier debugging, and a control flow comparable to Numpy. You can read more about it on the <a href="https://ai.googleblog.com/2017/10/eager-execution-imperative-define-by.html">Google AI Blog</a> use_tf_eager = False #<span class="citation" data-cites="param">@param</span> {type:â€œbooleanâ€}</td>
</tr>
<tr class="even">
<td># Use try/except so we can easily re-execute the whole notebook. if use_tf_eager: try: tf.enable_eager_execution() except: pass</td>
</tr>
<tr class="odd">
<td>import tensorflow_probability as tfp tfd = tfp.distributions tfb = tfp.bijectors</td>
</tr>
<tr class="even">
<td>def evaluate(tensors): â€œâ€œâ€œEvaluates Tensor or EagerTensor to Numpy <code>ndarray</code>s. Args: tensors: Object of <code>Tensor</code> or EagerTensor<code>s; can be</code>list<code>,</code>tuple<code>,</code>namedtuple` or combinations thereof.</td>
</tr>
<tr class="odd">
<td>Returns: ndarrays: Object with same structure as <code>tensors</code> except with <code>Tensor</code> or <code>EagerTensor</code>s replaced by Numpy <code>ndarray</code>s. â€œâ€œâ€ if tf.executing_eagerly(): return tf.contrib.framework.nest.pack_sequence_as( tensors, [t.numpy() if tf.contrib.framework.is_tensor(t) else t for t in tf.contrib.framework.nest.flatten(tensors)]) return sess.run(tensors)</td>
</tr>
<tr class="even">
<td>class _TFColor(object): â€œâ€œâ€œEnum of colors used in TF docs.â€â€œâ€ red = â€˜#F15854â€™ blue = â€˜#5DA5DAâ€™ orange = â€˜#FAA43Aâ€™ green = â€˜#60BD68â€™ pink = â€˜#F17CB0â€™ brown = â€˜#B2912Fâ€™ purple = â€˜#B276B2â€™ yellow = â€˜#DECF3Fâ€™ gray = â€˜#4D4D4Dâ€™ def <strong>getitem</strong>(self, i): return [ self.red, self.orange, self.green, self.blue, self.pink, self.brown, self.purple, self.yellow, self.gray,][i % 9] TFColor = _TFColor()</td>
</tr>
<tr class="odd">
<td>def session_options(enable_gpu_ram_resizing=True, enable_xla=True): â€œâ€œâ€ Allowing the notebook to make use of GPUs if theyâ€™re available.</td>
</tr>
<tr class="even">
<td>XLA (Accelerated Linear Algebra) is a domain-specific compiler for linear algebra that optimizes TensorFlow computations. â€œâ€œâ€ config = tf.ConfigProto() config.log_device_placement = True if enable_gpu_ram_resizing: # <code>allow_growth=True</code> makes it possible to connect multiple colabs to your # GPU. Otherwise the colab mallocâ€™s all GPU ram. config.gpu_options.allow_growth = True if enable_xla: # Enable on XLA. https://www.tensorflow.org/performance/xla/. config.graph_options.optimizer_options.global_jit_level = (tf.OptimizerOptions.ON_1) return config</td>
</tr>
<tr class="odd">
<td>def reset_sess(config=None): â€œâ€œâ€ Convenience function to create the TF graph &amp; session or reset them. â€œâ€œâ€ if config is None: config = session_options() global sess tf.reset_default_graph() try: sess.close() except: pass sess = tf.InteractiveSession(config=config)</td>
</tr>
<tr class="even">
<td>reset_sess() ```</td>
</tr>
<tr class="odd">
<td>WARNING: Logging before flag parsing goes to stderr. W0728 19:21:27.291700 139811709552448 lazy_loader.py:50] The TensorFlow contrib module will not be included in TensorFlow 2.0. For more information, please see: * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md * https://github.com/tensorflow/addons * https://github.com/tensorflow/io (for I/O related ops) If you depend on functionality not listed there, please file an issue.</td>
</tr>
<tr class="even">
<td>## æœ€ä¼Ÿå¤§çš„å®šç†ä»æœªè¢«å‘ŠçŸ¥è¿‡</td>
</tr>
<tr class="odd">
<td>æœ¬ç« çš„é‡ç‚¹æ˜¯ä¸€ä¸ªæ€»æ˜¯åœ¨æˆ‘ä»¬è„‘æµ·ä¸­è¹¦è¹¦è·³è·³çš„æƒ³æ³•ï¼Œä½†å¾ˆå°‘åœ¨ä¸“é—¨ç”¨äºç»Ÿè®¡çš„ä¹¦ç±ä¹‹å¤–æ˜ç¡®è¡¨è¾¾ã€‚äº‹å®ä¸Šï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªä¾‹å­ä¸­éƒ½ä½¿ç”¨è¿‡è¿™ä¸ªç®€å•çš„æƒ³æ³•ã€‚</td>
</tr>
<tr class="even">
<td>### å¤§æ•°å®šå¾‹</td>
</tr>
<tr class="odd">
<td>è®©$ Z_i <span class="math inline">\(ä¸º\)</span> N <span class="math inline">\(æ¥è‡ªæŸäº›æ¦‚ç‡åˆ†å¸ƒçš„ç‹¬ç«‹æ ·æœ¬ã€‚æ ¹æ®*å¤§æ•°å®šå¾‹*ï¼Œåªè¦é¢„æœŸå€¼\)</span> E[Z] $æ˜¯æœ‰é™çš„ï¼Œä»¥ä¸‹æˆç«‹ï¼Œ</td>
</tr>
<tr class="even">
<td><span class="math display">\[\frac{1}{N} \sum_{i=1}^N Z_i \rightarrow E[ Z ],  \;\;\; N \rightarrow \infty.\]</span></td>
</tr>
<tr class="odd">
<td>æ–‡å­—è¡¨è¿°:</td>
</tr>
<tr class="even">
<td>&gt; æ¥è‡ªç›¸åŒåˆ†å¸ƒçš„éšæœºå˜é‡åºåˆ—çš„å¹³å‡å€¼æ”¶æ•›äºè¯¥åˆ†å¸ƒçš„æœŸæœ›ã€‚</td>
</tr>
<tr class="odd">
<td>è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ— èŠçš„ç»“æœï¼Œä½†å®ƒå°†æ˜¯æ‚¨ä½¿ç”¨çš„æœ€æœ‰ç”¨çš„å·¥å…·ã€‚ä»–æ˜¯è®¡ç®—æœºæ•°å€¼è®¡ç®—çš„é‡è¦æ‰‹æ®µã€‚</td>
</tr>
<tr class="even">
<td>### ç›´è§‰</td>
</tr>
<tr class="odd">
<td>å¦‚æœä¸Šè¿°æ³•å¾‹æœ‰äº›ä»¤äººæƒŠè®¶ï¼Œå¯ä»¥é€šè¿‡ç ”ç©¶ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ›´æ¸…æ¥šåœ°è¯´æ˜ã€‚</td>
</tr>
<tr class="even">
<td>è€ƒè™‘ä¸€ä¸ªéšæœºå˜é‡$ Z <span class="math inline">\(ï¼Œå®ƒåªèƒ½å¸¦ä¸¤ä¸ªå€¼ï¼Œ\)</span> c_1 <span class="math inline">\(å’Œ\)</span> c_2 <span class="math inline">\(ã€‚å‡è®¾æˆ‘ä»¬æœ‰å¤§é‡\)</span> Z <span class="math inline">\(çš„æ ·æœ¬ï¼Œè¡¨ç¤ºä¸€ä¸ªç‰¹å®šçš„æ ·æœ¬\)</span> Z_i <span class="math inline">\(ã€‚è¯¥å®šç†è§„å®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¹³å‡æ‰€æœ‰æ ·æœ¬æ¥ä¼°è®¡\)</span> Z $çš„é¢„æœŸå€¼ã€‚è€ƒè™‘å¹³å‡å€¼ï¼š</td>
</tr>
<tr class="odd">
<td><span class="math display">\[ \frac{1}{N} \sum_{i=1}^N \;Z_i \]</span></td>
</tr>
<tr class="even">
<td>é€šè¿‡æ„é€ ï¼Œ$ Z_i <span class="math inline">\(åªèƒ½æ¥å—\)</span> c_1 <span class="math inline">\(æˆ–\)</span> c_2 <span class="math inline">\(ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œåˆ†åŒºï¼š\)</span>$ <span class="math display">\[\begin{align}
\frac{1}{N} \sum_{i=1}^N \;Z_i &amp; =\frac{1}{N} \big(  \sum_{ Z_i = c_1}c_1 + \sum_{Z_i=c_2}c_2 \big) \\
&amp; = c_1 \sum_{ Z_i = c_1}\frac{1}{N} + c_2 \sum_{ Z_i = c_2}\frac{1}{N} \\
&amp; = c_1 \times \text{ (approximate frequency of $c_1$) } \\
&amp; \;\;\;\;\;\;\;\;\; + c_2 \times \text{ (approximate frequency of $c_2$) } \\
&amp; \approx c_1 \times P(Z = c_1) + c_2 \times P(Z = c_2 ) \\
&amp; = E[Z]
\end{align}\]</span> $$</td>
</tr>
<tr class="odd">
<td>åœ¨æé™å¹³ç­‰ä¿æŒï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å¹³å‡å€¼ä¸­ä½¿ç”¨è¶Šæ¥è¶Šå¤šçš„æ ·æœ¬æ¥è¶Šæ¥è¶Šè¿‘ã€‚è¯¥æ³•é€‚ç”¨äºå‡ ä¹<em>ä»»ä½•åˆ†å¸ƒ</em>ï¼Œå‡å»æˆ‘ä»¬ç¨åå°†é‡åˆ°çš„ä¸€äº›é‡è¦æ¡ˆä¾‹ã€‚</td>
</tr>
<tr class="even">
<td>### ä¾‹å­ ____</td>
</tr>
<tr class="odd">
<td>ä¸‹é¢æ˜¯ä¸‰ä¸ªä¸åŒæ³Šæ¾éšæœºå˜é‡åºåˆ—çš„å¤§æ•°å®šå¾‹å›¾ã€‚</td>
</tr>
<tr class="even">
<td>æˆ‘ä»¬ç”¨å‚æ•°$ = 4.5 <span class="math inline">\(å¯¹`sample_size = 100000`æ³Šæ¾éšæœºå˜é‡è¿›è¡ŒæŠ½æ ·ã€‚ ï¼ˆå›æƒ³ä¸€ä¸‹æ³Šæ¾éšæœºå˜é‡çš„æœŸæœ›å€¼ç­‰äºå®ƒçš„å‚æ•°ã€‚ï¼‰æˆ‘ä»¬è®¡ç®—å‰\)</span> n <span class="math inline">\(ä¸ªæ ·æœ¬çš„å¹³å‡å€¼ï¼Œ\)</span>n=1$åˆ°<code>sample_size</code>ã€‚</td>
</tr>
<tr class="odd">
<td>```python sample_size_ = 100000 expected_value_ = lambda_val_ = 4.5 N_samples = tf.range(start=1, limit=sample_size_, delta=100)</td>
</tr>
<tr class="even">
<td>plt.figure(figsize(12.5, 4)) for k in range(3): samples = tfd.Poisson(rate=lambda_val_).sample(sample_shape=(sample_size_)) [ samples_, N_samples_ ] = evaluate([ samples, N_samples ])</td>
</tr>
<tr class="odd">
<td>partial_average_ = [ samples_[:i].mean() for i in N_samples_ ]</td>
</tr>
<tr class="even">
<td>plt.plot( N_samples_, partial_average_, lw=1.5,label=â€œ<span class="math inline">\(n\)</span>ä¸ªæ ·æœ¬çš„å¹³å‡å€¼ ; seq. %dâ€%k)</td>
</tr>
<tr class="odd">
<td>plt.plot( N_samples_, expected_value_ * np.ones_like( partial_average_), ls = â€œâ€“â€, label = â€œçœŸå®æœŸæœ›å€¼â€, c = â€œkâ€ )</td>
</tr>
<tr class="even">
<td>plt.ylim( 4.35, 4.65) plt.title( â€œéšæœºå˜é‡çš„å¹³å‡å€¼ä¸å…¶æœŸæœ›çš„æ”¶æ•›æ€§â€ ) plt.ylabel( â€œaverage of <span class="math inline">\(n\)</span> samplesâ€ ) plt.xlabel( â€œ# of samples, <span class="math inline">\(n\)</span>â€) plt.legend(); ```</td>
</tr>
<tr class="odd">
<td><img src="tfp-ch4/output_6_0.png" class="img-fluid"></td>
</tr>
<tr class="even">
<td>çœ‹ä¸€ä¸‹ä¸Šé¢çš„å›¾ï¼Œå¾ˆæ˜æ˜¾ï¼Œå½“æ ·æœ¬é‡å¾ˆå°æ—¶ï¼Œå¹³å‡å€¼ä¼šæœ‰è¾ƒå¤§çš„å˜åŒ–ï¼ˆæ¯”è¾ƒ<em>è·³è·ƒ</em>çš„æœ€åˆå¹³å‡å€¼ï¼Œç„¶å<em>å¹³æ»‘</em>ï¼‰ã€‚æ‰€æœ‰ä¸‰æ¡è·¯å¾„<em>æ¥è¿‘</em>å€¼4.5ï¼Œä½†éšç€$ N $å˜å¤§ï¼Œåªæ˜¯è°ƒæ•´å®ƒã€‚æ•°å­¦å®¶å’Œç»Ÿè®¡å­¦å®¶æœ‰å¦ä¸€ä¸ªåå­—ï¼šæ”¶æ•›ã€‚</td>
</tr>
<tr class="odd">
<td>æˆ‘ä»¬å¯ä»¥é—®çš„å¦ä¸€ä¸ªéå¸¸ç›¸å…³çš„é—®é¢˜æ˜¯<em>æˆ‘æ”¶æ•›åˆ°é¢„æœŸå€¼çš„é€Ÿåº¦æœ‰å¤šå¿«ï¼Ÿ</em>è®©æˆ‘ä»¬ç»˜åˆ¶ä¸€äº›æ–°çš„ä¸œè¥¿ã€‚å¯¹äºç‰¹å®šçš„$ N <span class="math inline">\(ï¼Œè®©æˆ‘ä»¬è¿›è¡Œä¸Šè¿°è¯•éªŒæ•°åƒæ¬¡ï¼Œå¹¶è®¡ç®—å‡ºæˆ‘ä»¬ä¸çœŸå®é¢„æœŸå€¼çš„å¹³å‡è·ç¦»ã€‚ä½†ç­‰ç­‰â€”â€”*å¹³å‡è®¡ç®—*ï¼Ÿè¿™åªæ˜¯å¤§æ•°æ³•åˆ™ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯ï¼Œå¯¹äºç‰¹å®šçš„\)</span> N $ï¼Œæ•°é‡ï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[D(N) = \sqrt{ \;E\left[\;\; \left( \frac{1}{N}\sum_{i=1}^NZ_i  - 4.5 \;\right)^2 \;\;\right] \;\;}\]</span></td>
</tr>
<tr class="odd">
<td>å¯¹äºæŸäº›$ N <span class="math inline">\(ï¼Œä¸Šè¿°å…¬å¼å¯è§£é‡Šä¸ºè·ç¦»çœŸå®å€¼ï¼ˆå¹³å‡å€¼ï¼‰çš„è·ç¦»ã€‚ ï¼ˆæˆ‘ä»¬å–å¹³æ–¹æ ¹ï¼Œå› æ­¤ä¸Šè¿°æ•°é‡çš„ç»´æ•°å’Œæˆ‘ä»¬çš„éšæœºå˜é‡æ˜¯ç›¸åŒçš„ï¼‰ã€‚ç”±äºä¸Šé¢æ˜¯ä¸€ä¸ªæœŸæœ›å€¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¤§æ•°å®šå¾‹è¿‘ä¼¼ï¼šæˆ‘ä»¬è®¡ç®—ä»¥ä¸‹å¤šæ¬¡å¹¶å¹³å‡å®ƒä»¬ï¼Œè€Œä¸æ˜¯å¹³å‡\)</span> Z_i $ï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[ Y_k = \left( \;\frac{1}{N}\sum_{i=1}^NZ_i  - 4.5 \; \right)^2 \]</span></td>
</tr>
<tr class="odd">
<td>é€šè¿‡è®¡ç®—ä¸Šé¢çš„$ N_y $æ¬¡ï¼ˆè®°ä½ï¼Œå®ƒæ˜¯éšæœºçš„ï¼‰ï¼Œå¹¶å¯¹å®ƒä»¬æ±‚å¹³å‡å€¼ï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[ \frac{1}{N_Y} \sum_{k=1}^{N_Y} Y_k \rightarrow E[ Y_k ] = E\;\left[\;\; \left( \frac{1}{N}\sum_{i=1}^NZ_i  - 4.5 \;\right)^2 \right]\]</span></td>
</tr>
<tr class="odd">
<td>æœ€åï¼Œå–å¹³æ–¹æ ¹ï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[ \sqrt{\frac{1}{N_Y} \sum_{k=1}^{N_Y} Y_k} \approx D(N) \]</span></td>
</tr>
<tr class="odd">
<td>```python N_Y = tf.constant(250) # ç”¨è¿™ä¹ˆå¤šæ¥è¿‘ä¼¼ D(N) N_array = tf.range(1000., 50000., 2500) # åœ¨å¤§çº¦ä½¿ç”¨è¿™ä¹ˆå¤šæ ·å“ã€‚å·®å¼‚ã€‚ D_N_results = tf.zeros(tf.shape(N_array)[0]) lambda_val = tf.constant(4.5) expected_value = tf.constant(4.5) #for X ~ Poi(lambda) , E[ X ] = lambda</td>
</tr>
<tr class="even">
<td>[ N_Y_, N_array_, D_N_results_, expected_value_, lambda_val_,] = evaluate([ N_Y, N_array, D_N_results, expected_value, lambda_val,])</td>
</tr>
<tr class="odd">
<td>def D_N(n): â€œâ€œâ€ This function approx. D_n, the average variance of using n samples. â€œâ€œâ€ Z = tfd.Poisson(rate=lambda_val_).sample(sample_shape=(int(n), int(N_Y_))) average_Z = tf.reduce_mean(Z, axis=0) average_Z_ = evaluate(average_Z)</td>
</tr>
<tr class="even">
<td>return np.sqrt(((average_Z_ - expected_value_)**2).mean())</td>
</tr>
<tr class="odd">
<td>for i,n in enumerate(N_array_): D_N_results_[i] = D_N(n)</td>
</tr>
<tr class="even">
<td>plt.figure(figsize(12.5, 3)) plt.xlabel( â€œ<span class="math inline">\(N\)</span>â€ ) plt.ylabel( â€œé¢„æœŸä¸çœŸå®å€¼çš„å¹³æ–¹è·ç¦»â€ ) plt.plot(N_array_, D_N_results_, lw = 3, label=â€œéšæœºå˜é‡<span class="math inline">\(N\)</span>çš„é¢„æœŸå€¼ä¸å¹³å‡å€¼ä¹‹é—´çš„é¢„æœŸè·ç¦»ã€‚â€) plt.plot( N_array_, np.sqrt(expected_value_)/np.sqrt(N_array_), lw = 3, ls = â€œâ€“â€, label = râ€<span class="math inline">\(\frac{\sqrt{\lambda}}{\sqrt{N}}\)</span>â€ ) plt.legend() plt.title( â€œæ ·æœ¬å¹³å‡æ”¶æ•›çš„â€œå¿«â€ç¨‹åº¦å¦‚ä½•ï¼Ÿ â€ ); ```</td>
</tr>
<tr class="odd">
<td><img src="tfp-ch4/output_8_0.png" class="img-fluid"></td>
</tr>
<tr class="even">
<td>æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œéšç€$ N $å¢é•¿ï¼Œæˆ‘ä»¬çš„æ ·æœ¬å¹³å‡å€¼ä¸å®é™…é¢„æœŸå€¼ä¹‹é—´çš„é¢„æœŸè·ç¦»ä¼šç¼©å°ã€‚ä½†ä¹Ÿæ³¨æ„åˆ°<em>æ”¶æ•›ç‡</em>é™ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦10 000ä¸ªé¢å¤–æ ·æœ¬ä»0.020ç§»åŠ¨åˆ°0.015ï¼Œç›¸å·®0.005ï¼Œä½†æ˜¯<em>20000</em>æ›´å¤šæ ·æœ¬å†æ¬¡ä»0.015é™ä½åˆ°0.010ï¼Œå†æ¬¡åªæœ‰0.005å‡å°‘ã€‚</td>
</tr>
<tr class="odd">
<td>äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥è¡¡é‡è¿™ç§æ”¶æ•›é€Ÿåº¦ã€‚ä¸Šé¢æˆ‘ç»˜åˆ¶äº†ç¬¬äºŒè¡Œï¼Œå‡½æ•°$ / <span class="math inline">\(ã€‚è¿™ä¸æ˜¯ä»»æ„é€‰æ‹©çš„ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»™å®šä¸€ç³»åˆ—éšæœºå˜é‡åˆ†å¸ƒå¦‚\)</span> Z <span class="math inline">\(ï¼Œå¤§æ•°å®šå¾‹çš„æ”¶æ•›ç‡ä¸º\)</span> E [Z] $</td>
</tr>
<tr class="even">
<td><span class="math display">\[ \frac{ \sqrt{ \; Var(Z) \; } }{\sqrt{N} }\]</span></td>
</tr>
<tr class="odd">
<td>è¿™æœ‰ç”¨çš„çŸ¥è¯†ï¼šå¯¹äºç»™å®šçš„å¤§$ N <span class="math inline">\(ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ˆå¹³å‡è€Œè¨€ï¼‰æˆ‘ä»¬ä¸ä¼°è®¡çš„è·ç¦»ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨è´å¶æ–¯ç¯å¢ƒä¸­ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ— ç”¨çš„ç»“æœï¼šè´å¶æ–¯åˆ†ææ˜¯ä¸ç¡®å®šçš„ï¼Œé‚£ä¹ˆæ·»åŠ é¢å¤–ç²¾ç¡®æ•°å­—çš„*ç»Ÿè®¡*ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿè™½ç„¶ç»˜å›¾æ ·æœ¬çš„è®¡ç®—æˆæœ¬å¯ä»¥å¾ˆä½ï¼Œä½†*è¶Šå¤§çš„*\)</span>N$ä¹Ÿå¾ˆå¥½ã€‚</td>
</tr>
<tr class="even">
<td>### æˆ‘ä»¬å¦‚ä½•è®¡ç®—$ Varï¼ˆZï¼‰$ï¼Ÿ</td>
</tr>
<tr class="odd">
<td>æ–¹å·®åªæ˜¯å¦ä¸€ä¸ªå¯ä»¥è¿‘ä¼¼çš„é¢„æœŸå€¼ï¼è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼Œä¸€æ—¦æˆ‘ä»¬å¾—åˆ°é¢„æœŸå€¼ï¼ˆé€šè¿‡ä½¿ç”¨å¤§æ•°å®šå¾‹æ¥ä¼°è®¡å®ƒï¼Œè¡¨ç¤º$ $ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¼°è®¡æ–¹å·®ï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[ \frac{1}{N}\sum_{i=1}^N \;(Z_i - \mu)^2 \rightarrow E[ \;( Z - \mu)^2 \;] = Var( Z )\]</span></td>
</tr>
<tr class="odd">
<td>### æœŸæœ›å€¼å’Œæ¦‚ç‡</td>
</tr>
<tr class="even">
<td>æœŸæœ›å€¼ä¸ä¼°è®¡æ¦‚ç‡ä¹‹é—´çš„å…³ç³»æ›´ä¸ºæ˜æ˜¾ã€‚å®šä¹‰<em>æŒ‡æ ‡åŠŸèƒ½</em></td>
</tr>
<tr class="odd">
<td><span class="math display">\[\mathbb{1}_A(x) =
\begin{cases} 1 &amp;  x \in A \\\\
0 &amp;  else
\end{cases}
\]</span></td>
</tr>
<tr class="even">
<td>ç„¶åï¼Œæ ¹æ®å¤§æ•°å®šå¾‹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰è®¸å¤šæ ·æœ¬$ X_i <span class="math inline">\(ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼°è®¡äº‹ä»¶\)</span> A <span class="math inline">\(çš„æ¦‚ç‡ï¼Œè¡¨ç¤ºä¸º\)</span> Pï¼ˆAï¼‰$ï¼š</td>
</tr>
<tr class="odd">
<td><span class="math display">\[ \frac{1}{N} \sum_{i=1}^N \mathbb{1}_A(X_i) \rightarrow E[\mathbb{1}_A(X)] =  P(A) \]</span></td>
</tr>
<tr class="even">
<td>åŒæ ·ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„è§‚æµ‹åï¼Œè¿™æ˜¯ç›¸å½“æ˜æ˜¾çš„ï¼šå¦‚æœäº‹ä»¶å‘ç”Ÿï¼ŒæŒ‡æ ‡å‡½æ•°åªæœ‰1ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå°†äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ç›¸åŠ å¹¶é™¤ä»¥è¯•éªŒæ€»æ•°ï¼ˆè€ƒè™‘æˆ‘ä»¬é€šå¸¸å¦‚ä½•ä½¿ç”¨é¢‘ç‡é€¼è¿‘æ¦‚ç‡ï¼‰ ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬å¸Œæœ›ä¼°è®¡$ Z Expï¼ˆ.5ï¼‰<span class="math inline">\(å¤§äº5çš„æ¦‚ç‡ï¼Œå¹¶ä¸”æˆ‘ä»¬ä»\)</span> Expï¼ˆ.5ï¼‰$åˆ†å¸ƒä¸­å¾—åˆ°è®¸å¤šæ ·æœ¬ã€‚</td>
</tr>
<tr class="odd">
<td><span class="math display">\[ P( Z &gt; 5 ) =  \frac{1}{N}\sum_{i=1}^N \mathbb{1}_{z &gt; 5 }(Z_i) \]</span></td>
</tr>
<tr class="even">
<td>```python N = 10000</td>
</tr>
<tr class="odd">
<td>print(â€œæ¦‚ç‡ä¼°è®¡:â€, len(np.where(evaluate(tfd.Exponential(rate=0.5).sample(sample_shape=N)) &gt; 5))/N ) ```</td>
</tr>
<tr class="even">
<td>æ¦‚ç‡ä¼°è®¡: 0.0001</td>
</tr>
<tr class="odd">
<td>### è¿™ä¸è´å¶æ–¯ç»Ÿè®¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</td>
</tr>
<tr class="even">
<td>ä½¿ç”¨æœŸæœ›å€¼è®¡ç®—è´å¶æ–¯æ¨æ–­ä¸­å°†åœ¨ä¸‹ä¸€ç« ä¸­ä»‹ç»çš„<em>ç‚¹ä¼°è®¡</em>ã€‚åœ¨æ›´å¤šåˆ†æçš„è´å¶æ–¯æ¨æ–­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¯„ä¼°è¡¨ç¤ºä¸ºå¤šç»´ç§¯åˆ†çš„å¤æ‚æœŸæœ›å€¼ã€‚ä¸å†ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»åéªŒåˆ†å¸ƒä¸­è¿›è¡Œé‡‡æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦è¯„ä¼°å¹³å‡å€¼ã€‚æ›´å®¹æ˜“ã€‚å¦‚æœå‡†ç¡®æ€§æ˜¯ä¸€ä¸ªä¼˜å…ˆäº‹é¡¹ï¼Œé‚£ä¹ˆä¸Šé¢çš„å›¾è¡¨æ˜¾ç¤ºä½ æ”¶æ•›é€Ÿåº¦æœ‰å¤šå¿«ã€‚å¦‚æœéœ€è¦è¿›ä¸€æ­¥çš„ç²¾ç¡®åº¦ï¼Œåªéœ€ä»åéªŒä¸­é‡‡é›†æ›´å¤šæ ·æœ¬ã€‚</td>
</tr>
<tr class="odd">
<td>ä»€ä¹ˆæ—¶å€™å¤Ÿäº†ï¼Ÿä½ ä½•æ—¶å¯ä»¥åœæ­¢ä»åæ–¹æŠ½å–æ ·æœ¬ï¼Ÿè¿™æ˜¯ä»ä¸šè€…çš„å†³å®šï¼Œä¹Ÿå–å†³äºæ ·æœ¬çš„æ–¹å·®ï¼ˆä»ä¸Šé¢å›å¿†é«˜æ–¹å·®æ„å‘³ç€å¹³å‡å€¼ä¼šæ”¶æ•›å¾—æ›´æ…¢ï¼‰ã€‚</td>
</tr>
<tr class="even">
<td>æˆ‘ä»¬ä¹Ÿåº”è¯¥ç†è§£å¤§æ•°å®šå¾‹ä½•æ—¶å¤±è´¥ã€‚é¡¾åæ€ä¹‰ï¼Œå¹¶å°†ä¸Šé¢çš„å›¾è¡¨ä¸å°<span class="math inline">\(N\)</span>è¿›è¡Œæ¯”è¾ƒï¼Œè¯¥æ³•åˆ™é€‚ç”¨äºå¤§æ ·æœ¬é‡ã€‚æ²¡æœ‰è¿™ä¸ªï¼Œæ¸è¿‘ç»“æœæ˜¯ä¸å¯é çš„ã€‚äº†è§£å®šç†å¤±è´¥çš„æƒ…å†µå¯ä»¥è®©æˆ‘ä»¬å¯¹è‡ªå·±åº”è¯¥å¤šä¹ˆ<em>ä¸è‡ªä¿¡</em>å……æ»¡ä¿¡å¿ƒã€‚ä¸‹ä¸€èŠ‚å°†è®¨è®ºæ­¤é—®é¢˜ã€‚</td>
</tr>
<tr class="odd">
<td>### å°æ•°ç›®çš„ç´Šä¹±</td>
</tr>
<tr class="even">
<td>å¤§æ•°å®šå¾‹åªæœ‰åœ¨$ N $å¾—åˆ°<em>æ— é™å¤§</em>æ—¶æ‰æœ‰æ•ˆï¼šæ°¸è¿œä¸å¯èƒ½å®ç°ã€‚è™½ç„¶å®šç†æ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„å·¥å…·ï¼Œä½†å¹¿æ³›åœ°åº”ç”¨å®ƒæ˜¯è›®å¹²çš„ã€‚æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªä¾‹å­è¯´æ˜äº†è¿™</td>
</tr>
<tr class="odd">
<td>### Example: æ±‡æ€»çš„åœ°ç†æ•°æ®</td>
</tr>
<tr class="even">
<td>æ•°æ®é€šå¸¸ä»¥æ±‡æ€»å½¢å¼å‡ºç°ã€‚ä¾‹å¦‚ï¼Œæ•°æ®å¯ä»¥æŒ‰å·ï¼Œå¿æˆ–åŸå¸‚çº§åˆ«åˆ†ç»„ã€‚å½“ç„¶ï¼Œäººå£æ•°é‡å› åœ°ç†åŒºåŸŸè€Œå¼‚ã€‚å¦‚æœæ•°æ®æ˜¯æ¯ä¸ªåœ°ç†åŒºåŸŸçš„æŸäº›ç‰¹å¾çš„å¹³å‡å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»æ„è¯†åˆ°å¤§æ•°å®šå¾‹ä»¥åŠå®ƒå¯¹äºäººå£è¾ƒå°‘çš„åŒºåŸŸå¦‚ä½•<em>å¤±è´¥</em>ã€‚</td>
</tr>
<tr class="odd">
<td>æˆ‘ä»¬å°†åœ¨ç©å…·æ•°æ®é›†ä¸Šè§‚å¯Ÿåˆ°è¿™ä¸€ç‚¹ã€‚å‡è®¾æˆ‘ä»¬çš„æ•°æ®é›†ä¸­æœ‰äº”åƒä¸ªå¿ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªå·çš„äººå£æ•°é‡å‡åŒ€åˆ†å¸ƒåœ¨100åˆ°1500ä¹‹é—´ã€‚äººå£æ•°é‡çš„ç”Ÿæˆæ–¹å¼ä¸è®¨è®ºæ— å…³ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½è¯æ˜è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯æµ‹é‡æ¯ä¸ªå¿çš„å¹³å‡èº«é«˜ã€‚æˆ‘ä»¬ä¸çŸ¥é“ï¼Œèº«é«˜ä¸ä¼šå› å¿è€Œå¼‚ï¼Œæ¯ä¸ªäººï¼Œæ— è®ºä»–æˆ–å¥¹ç›®å‰å±…ä½åœ¨å“ªä¸ªå¿ï¼Œéƒ½æœ‰ä¸ä»–ä»¬èº«é«˜ç›¸åŒçš„åˆ†å¸ƒï¼š</td>
</tr>
<tr class="even">
<td><span class="math display">\[ \text{height} \sim \text{Normal}(\text{mu}=150, \text{sd}=15 ) \]</span></td>
</tr>
<tr class="odd">
<td>æˆ‘ä»¬æ±‡æ€»äº†å¿çº§çš„ä¸ªäººï¼Œå› æ­¤æˆ‘ä»¬åªæœ‰å¿å†…<em>å¹³å‡å€¼çš„æ•°æ®</em>ã€‚æˆ‘ä»¬çš„æ•°æ®é›†å¯èƒ½æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</td>
</tr>
<tr class="even">
<td>```python plt.figure(figsize(12.5, 4))</td>
</tr>
<tr class="odd">
<td>std_height = 15. mean_height = 150. n_counties = 500 smallest_population = 100 largest_population = 1500 pop_generator = np.random.randint norm = np.random.normal</td>
</tr>
<tr class="even">
<td>population_ = pop_generator(smallest_population, largest_population, n_counties)</td>
</tr>
<tr class="odd">
<td># Our strategy to vectorize this problem will be to end-to-end concatenate the # number of draws we need. Then weâ€™ll loop over the pieces. d = tfp.distributions.Normal(loc=mean_height, scale= 1. / std_height) x = d.sample(np.sum(population_))</td>
</tr>
<tr class="even">
<td>average_across_county = [] seen = 0 for p in population_: average_across_county.append(tf.reduce_mean(x[seen:seen+p])) seen += p average_across_county_full = tf.stack(average_across_county)</td>
</tr>
<tr class="odd">
<td>##located the counties with the apparently most extreme average heights. [ average_across_county_, i_min, i_max] = evaluate([ average_across_county_full, tf.argmin( average_across_county_full ), tf.argmax( average_across_county_full )])</td>
</tr>
<tr class="even">
<td>#plot population size vs.&nbsp;recorded average plt.scatter( population_, average_across_county_, alpha = 0.5, c=TFColor[6]) plt.scatter( [ population_[i_min], population_[i_max] ], [average_across_county_[i_min], average_across_county_[i_max] ], s = 60, marker = â€œoâ€, facecolors = â€œnoneâ€, edgecolors = TFColor[0], linewidths = 1.5, label=â€œæç«¯çš„é«˜åº¦â€)</td>
</tr>
<tr class="odd">
<td>plt.xlim( smallest_population, largest_population ) plt.title( â€œå¹³å‡é«˜åº¦ vs.&nbsp;å¿äººå£â€) plt.xlabel(â€œå¿äººå£â€) plt.ylabel(â€œå¿çš„å¹³å‡èº«é«˜â€) plt.plot( [smallest_population, largest_population], [mean_height, mean_height], color = â€œkâ€, label = â€œtrue expected<br>
heightâ€, ls=â€œâ€“â€ ) plt.legend(scatterpoints = 1); ```</td>
</tr>
<tr class="even">
<td><img src="tfp-ch4/output_15_0.png" class="img-fluid"></td>
</tr>
<tr class="odd">
<td>æˆ‘ä»¬è§‚å¯Ÿåˆ°äº†ä»€ä¹ˆï¼Ÿ <em>å¦‚æœä¸è€ƒè™‘äººå£è§„æ¨¡</em> æˆ‘ä»¬å†’ç€é€ æˆå·¨å¤§æ¨ç†é”™è¯¯çš„é£é™©ï¼šå¦‚æœæˆ‘ä»¬å¿½ç•¥äº†äººå£è§„æ¨¡ï¼Œæˆ‘ä»¬ä¼šè¯´æœ€çŸ­å’Œæœ€é«˜ä¸ªä½“çš„å¿å·²è¢«æ­£ç¡®åœˆå‡ºã€‚ä½†ç”±äºä»¥ä¸‹åŸå› ï¼Œè¿™ç§æ¨æ–­æ˜¯é”™è¯¯çš„ã€‚è¿™ä¸¤ä¸ªå¿<em>ä¸ä¸€å®š</em>å…·æœ‰æœ€æç«¯çš„é«˜åº¦ã€‚è®¡ç®—å‡ºçš„è¾ƒå°ç§ç¾¤çš„å¹³å‡å€¼ä¸èƒ½å¾ˆå¥½åœ°åæ˜ å‡ºäººå£çš„çœŸå®é¢„æœŸä»·å€¼ï¼ˆäº‹å®ä¸Šåº”è¯¥æ˜¯$ = 150 $ï¼‰ã€‚æ ·æœ¬å¤§å°/äººå£è§„æ¨¡/ $ N $ï¼Œæ— è®ºä½ æƒ³è¦ä»€ä¹ˆï¼Œå®ƒéƒ½å¤ªå°äº†ï¼Œæ— æ³•æœ‰æ•ˆåœ°è°ƒç”¨å¤§æ•°å®šå¾‹ã€‚</td>
</tr>
<tr class="even">
<td>æˆ‘ä»¬æä¾›äº†æ›´å¤šåå¯¹è¿™ç§æ¨è®ºçš„è¯æ®ã€‚å›æƒ³ä¸€ä¸‹ï¼Œäººå£æ•°é‡å‡åŒ€åˆ†å¸ƒåœ¨100åˆ°1500ä¹‹é—´ã€‚æˆ‘ä»¬çš„ç›´è§‰åº”è¯¥å‘Šè¯‰æˆ‘ä»¬ï¼Œäººå£æœ€é«˜æåº¦çš„å¿ä¹Ÿåº”è¯¥ç»Ÿä¸€åˆ†å¸ƒåœ¨100åˆ°1500ä¹‹é—´ï¼Œå½“ç„¶ä¹Ÿä¸ä¾èµ–äºè¯¥å¿çš„äººå£ã€‚ä¸æ˜¯è¿™æ ·ã€‚ä»¥ä¸‹æ˜¯å…·æœ‰æœ€æç«¯é«˜åº¦çš„å¿çš„äººå£è§„æ¨¡ã€‚</td>
</tr>
<tr class="odd">
<td><code>python print("10ä¸ªæœ€å°‘å¿çš„äººå£è§„æ¨¡ï¼š") print(population_[ np.argsort( average_across_county_ )[:10] ], '\n') print("10ä¸ªæœ€é«˜å¿çš„äººå£è§„æ¨¡ï¼š ") print(population_[ np.argsort( -average_across_county_ )[:10] ])</code></td>
</tr>
<tr class="even">
<td>10ä¸ªæœ€å°‘å¿çš„äººå£è§„æ¨¡ï¼š [160 134 280 129 207 176 411 256 247 176]</td>
</tr>
<tr class="odd">
<td>10ä¸ªæœ€é«˜å¿çš„äººå£è§„æ¨¡ï¼š [113 127 258 362 185 224 478 310 148 312]</td>
</tr>
<tr class="even">
<td>åœ¨100åˆ°1500ä¹‹é—´æ ¹æœ¬æ²¡æœ‰ç»Ÿä¸€ã€‚è¿™æ˜¯å¤§æ•°å®šå¾‹çš„ç»å¯¹å¤±è´¥ã€‚</td>
</tr>
<tr class="odd">
<td>### ç¤ºä¾‹ï¼šKaggleçš„<em>ç¾å›½ã€‚äººå£æ™®æŸ¥é€€è´§ç‡æŒ‘æˆ˜</em></td>
</tr>
<tr class="even">
<td>ä»¥ä¸‹æ˜¯2010å¹´ç¾å›½äººå£æ™®æŸ¥çš„æ•°æ®ï¼Œè¯¥æ•°æ®å°†å¿ä»¥å¤–çš„äººå£åˆ’åˆ†ä¸ºè¡—åŒºé›†å›¢ï¼ˆåŸå¸‚è¡—åŒºæˆ–åŒç­‰åŸå¸‚çš„é›†åˆï¼‰ã€‚è¿™ä¸ªæ•°æ®é›†æ¥è‡ªKaggleæœºå™¨å­¦ä¹ ç«èµ›ï¼Œä¸€äº›åŒäº‹å’Œæˆ‘å‚ä¸äº†ã€‚ç›®çš„æ˜¯ä½¿ç”¨äººå£æ™®æŸ¥å˜é‡ï¼ˆä¸­ä½æ•°æ”¶å…¥ï¼Œå¥³æ€§äººæ•°ï¼‰é¢„æµ‹ä¸€ç»„ç¾¤ä½“çš„äººå£æ™®æŸ¥ä¿¡ä»¶å›é‚®ç‡ï¼Œæµ‹é‡å€¼åœ¨0åˆ°100ä¹‹é—´ã€‚è¡—åŒºé›†å›¢ï¼Œæ‹–è½¦åœè½¦åœºæ•°é‡ï¼Œå¹³å‡å„¿ç«¥äººæ•°ç­‰ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬ç»˜åˆ¶äººå£æ™®æŸ¥é‚®ä»¶å›å¤ç‡ä¸å—ç»„äººå£çš„å…³ç³»ï¼š</td>
</tr>
<tr class="odd">
<td>```python reset_sess()</td>
</tr>
<tr class="even">
<td>import wget url = â€˜https://raw.githubusercontent.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/master/Chapter4_TheGreatestTheoremNeverTold/data/census_data.csvâ€™ filename = wget.download(url) filename ```</td>
</tr>
<tr class="odd">
<td>â€˜census_data.csvâ€™</td>
</tr>
<tr class="even">
<td>```python plt.figure(figsize(12.5, 6.5)) data_ = np.genfromtxt( â€œcensus_data.csvâ€, skip_header=1, delimiter= â€œ,â€) plt.scatter( data_[:,1], data_[:,0], alpha = 0.5, c=TFColor[6]) plt.title(â€œäººå£æ™®æŸ¥é‚®å¯„å›é‚®ç‡ä¸äººå£â€) plt.ylabel(â€œé‚®å¯„å›å¤ç‡â€) plt.xlabel(â€œå—ç»„äººå£â€) plt.xlim(-100, 15e3 ) plt.ylim( -5, 105)</td>
</tr>
<tr class="odd">
<td>i_min = tf.argmin( data_[:,0] ) i_max = tf.argmax( data_[:,0] )</td>
</tr>
<tr class="even">
<td>[ i_min_, i_max_ ] = evaluate([ i_min, i_max ])</td>
</tr>
<tr class="odd">
<td>plt.scatter( [ data_[i_min_,1], data_[i_max_, 1] ], [ data_[i_min_,0], data_[i_max_,0] ], s = 60, marker = â€œoâ€, facecolors = â€œnoneâ€, edgecolors = TFColor[0], linewidths = 1.5, label=â€œæœ€æç«¯çš„ç‚¹â€)</td>
</tr>
<tr class="even">
<td>plt.legend(scatterpoints = 1); ```</td>
</tr>
<tr class="odd">
<td><img src="tfp-ch4/output_20_0.png" class="img-fluid"></td>
</tr>
<tr class="even">
<td>ä»¥ä¸Šæ˜¯ç»Ÿè®¡å­¦ä¸­çš„ç»å…¸ç°è±¡ã€‚æˆ‘è¯´<em>ç»å…¸</em>æŒ‡çš„æ˜¯ä¸Šé¢æ•£ç‚¹å›¾çš„â€œå½¢çŠ¶â€ã€‚å®ƒéµå¾ªç»å…¸çš„ä¸‰è§’å½¢å½¢å¼ï¼Œéšç€æˆ‘ä»¬å¢åŠ æ ·æœ¬å¤§å°è€Œç´§ç¼©ï¼ˆéšç€å¤§æ•°å®šå¾‹å˜å¾—æ›´åŠ ç²¾ç¡®ï¼‰ã€‚</td>
</tr>
<tr class="odd">
<td>æˆ‘å¯èƒ½ä¼šè¿‡åˆ†å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Œä¹Ÿè®¸æˆ‘åº”è¯¥æŠŠè¿™æœ¬ä¹¦å‘½åä¸ºâ€œä½ æ²¡æœ‰å¤§æ•°æ®é—®é¢˜ï¼â€ï¼Œä½†è¿™é‡Œå†æ¬¡ä¸¾ä¾‹è¯´æ˜<em>å°æ•°æ®é›†</em>çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯å¤§æ•°æ®é›†ã€‚ç®€å•åœ°è¯´ï¼Œä½¿ç”¨å¤§æ•°å®šå¾‹ä¸èƒ½å¤„ç†å°æ•°æ®é›†ã€‚ä¸å¯¹å¤§æ•°æ®é›†ï¼ˆä¾‹å¦‚å¤§æ•°æ®ï¼‰æ¯«ä¸è´¹åŠ›åœ°åº”ç”¨å®šç†ç›¸æ¯”è¾ƒã€‚æˆ‘ä¹‹å‰æåˆ°çŸ›ç›¾çš„æ˜¯ï¼Œå¤§æ•°æ®é¢„æµ‹é—®é¢˜æ˜¯é€šè¿‡ç›¸å¯¹ç®€å•çš„ç®—æ³•è§£å†³çš„ã€‚é€šè¿‡ç†è§£å¤§æ•°å®šå¾‹åˆ›å»º<em>ç¨³å®š</em>çš„è§£å†³æ–¹æ¡ˆï¼Œå³åŠ å…¥æˆ–å‡å°‘ä¸€äº›æ•°æ®ç‚¹ä¸ä¼šå¯¹è§£å†³æ–¹æ¡ˆäº§ç”Ÿå¤ªå¤§å½±å“ï¼Œå¯ä»¥éƒ¨åˆ†è§£å†³æ‚–è®ºã€‚å¦ä¸€æ–¹é¢ï¼Œå‘å°å‹æ•°æ®é›†æ·»åŠ æˆ–åˆ é™¤æ•°æ®ç‚¹å¯èƒ½ä¼šäº§ç”Ÿæˆªç„¶ä¸åŒçš„ç»“æœã€‚</td>
</tr>
<tr class="even">
<td>ä¸ºäº†è¿›ä¸€æ­¥é˜…è¯»å¤§æ•°å®šå¾‹çš„éšæ‚£ï¼Œæˆ‘å¼ºçƒˆæ¨èä¼˜ç§€çš„æ‰‹ç¨¿<a href="http://nsm.uh.edu/~dgraur/niv/TheMostDangerousEquation.pdf">æœ€å±é™©çš„æ–¹ç¨‹å¼</a></td>
</tr>
<tr class="odd">
<td>### Example: è®¡ç®—Githubæ˜Ÿ</td>
</tr>
<tr class="even">
<td>Githubå­˜å‚¨åº“çš„å¹³å‡æ˜Ÿæ•°æ˜¯å¤šå°‘ï¼Ÿä½ æ€ä¹ˆç®—è¿™ä¸ªï¼Ÿæœ‰è¶…è¿‡600ä¸‡ä¸ªå­˜å‚¨åº“ï¼Œå› æ­¤æœ‰è¶³å¤Ÿçš„æ•°æ®æ¥è°ƒç”¨å¤§æ•°å®šå¾‹ã€‚è®©æˆ‘ä»¬å¼€å§‹æå–ä¸€äº›æ•°æ®ã€‚</td>
</tr>
<tr class="odd">
<td>```python reset_sess()</td>
</tr>
<tr class="even">
<td>import wget url = â€˜https://raw.githubusercontent.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/master/Chapter3_MCMC/data/github_data.csvâ€™ filename = wget.download(url) filename ```</td>
</tr>
<tr class="odd">
<td>â€˜github_data (1).csvâ€™</td>
</tr>
<tr class="even">
<td>```python # Github data scrapper # See documentation_url: https://developer.github.com/v3/</td>
</tr>
<tr class="odd">
<td>from json import loads import datetime import numpy as np from requests import get</td>
</tr>
<tr class="even">
<td>â€œâ€œâ€ variables of interest: indp. variables - language, given as a binary variable. Need 4 positions for 5 langagues - #number of days created ago, 1 position - has wiki? Boolean, 1 position - followers, 1 position - following, 1 position - constant</td>
</tr>
<tr class="odd">
<td>dep. variables -stars/watchers -forks â€œâ€œâ€</td>
</tr>
<tr class="even">
<td>MAX = 8000000 today = datetime.datetime.today() randint = np.random.randint N = 10 #sample size. auth = (â€œzhen8838â€, â€œzqh19960305â€ )</td>
</tr>
<tr class="odd">
<td>language_mappings = {â€œPythonâ€: 0, â€œJavaScriptâ€: 1, â€œRubyâ€: 2, â€œJavaâ€:3, â€œShellâ€:4, â€œPHPâ€:5}</td>
</tr>
<tr class="even">
<td>#define data matrix: X = np.zeros( (N , 12), dtype = int )</td>
</tr>
<tr class="odd">
<td>for i in range(N): is_fork = True is_valid_language = False</td>
</tr>
<tr class="even">
<td>while is_fork == True or is_valid_language == False: is_fork = True is_valid_language = False</td>
</tr>
<tr class="odd">
<td>params = {â€œsinceâ€:randint(0, MAX ) } r = get(â€œhttps://api.github.com/repositoriesâ€, params = params, auth=auth ) results = loads( r.text )[0] #im only interested in the first one, and if it is not a fork. # print(results) is_fork = results[â€œforkâ€]</td>
</tr>
<tr class="even">
<td>r = get( results[â€œurlâ€], auth = auth)</td>
</tr>
<tr class="odd">
<td>#check the language repo_results = loads( r.text ) try: language_mappings[ repo_results[â€œlanguageâ€ ] ] is_valid_language = True except: pass</td>
</tr>
<tr class="even">
<td>#languages X[ i, language_mappings[ repo_results[â€œlanguageâ€ ] ] ] = 1</td>
</tr>
<tr class="odd">
<td>#delta time X[ i, 6] = ( today - datetime.datetime.strptime( repo_results[â€œcreated_atâ€][:10], â€œ%Y-%m-%dâ€ ) ).days</td>
</tr>
<tr class="even">
<td>#haswiki X[i, 7] = repo_results[â€œhas_wikiâ€]</td>
</tr>
<tr class="odd">
<td>#get user information r = get( results[â€œownerâ€][â€œurlâ€] , auth = auth) user_results = loads( r.text ) X[i, 8] = user_results[â€œfollowingâ€] X[i, 9] = user_results[â€œfollowersâ€]</td>
</tr>
<tr class="even">
<td>#get dep. data X[i, 10] = repo_results[â€œwatchers_countâ€] X[i, 11] = repo_results[â€œforks_countâ€] print() print(â€ â€”â€”â€”â€”â€“ â€œ) print(i,â€: â€œ, results[â€full_nameâ€], repo_results[â€languageâ€ ], repo_results[â€watchers_countâ€], repo_results[â€forks_countâ€]) print(â€ â€”â€”â€”â€”â€“ â€œ) print()</td>
</tr>
<tr class="odd">
<td>np.savetxt(â€œgithub_data.csvâ€, X, delimiter=â€œ,â€, fmt=â€œ%dâ€ ) ```</td>
</tr>
<tr class="even">
<td>â€”â€”â€”â€”â€“ 0 : hbradlow/autograde Python 0 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="odd">
<td>â€”â€”â€”â€”â€“ 1 : pkellett/test JavaScript 2 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="even">
<td>â€”â€”â€”â€”â€“ 2 : sputnikus/cmdoro Python 0 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="odd">
<td>â€”â€”â€”â€”â€“ 3 : theteam/vagrant-django-template Python 36 12 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="even">
<td>â€”â€”â€”â€”â€“ 4 : contra/JMOT Java 17 9 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="odd">
<td>â€”â€”â€”â€”â€“ 5 : jcDesigns99/sample_app Ruby 1 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="even">
<td>â€”â€”â€”â€”â€“ 6 : tbarho/base_app Ruby 1 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="odd">
<td>â€”â€”â€”â€”â€“ 7 : lvh/txscrypt Python 6 1 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="even">
<td>â€”â€”â€”â€”â€“ 8 : Xand0r/Treebook JavaScript 1 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="odd">
<td>â€”â€”â€”â€”â€“ 9 : wingertge/ThumbsApplyGroupManager Java 1 0 â€”â€”â€”â€”â€“</td>
</tr>
<tr class="even">
<td>### ç»“è®º</td>
</tr>
<tr class="odd">
<td>è™½ç„¶å¤§æ•°å®šå¾‹å¾ˆé…·ï¼Œä½†åªæœ‰å®ƒçš„åå­—æš—ç¤ºå®ƒæ‰çœŸå®ï¼šåªæœ‰å¤§æ ·æœ¬é‡ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•é€šè¿‡ä¸è€ƒè™‘<em>æ•°æ®çš„å½¢çŠ¶</em>æ¥å½±å“æˆ‘ä»¬çš„æ¨ç†ã€‚</td>
</tr>
<tr class="even">
<td>1. é€šè¿‡ï¼ˆç®€å•çš„ï¼‰ä»åéªŒåˆ†å¸ƒä¸­æŠ½å–è®¸å¤šæ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿å¤§æ•°å®šå¾‹é€‚ç”¨äºæˆ‘ä»¬æ¥è¿‘æœŸæœ›å€¼ï¼ˆæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« ä¸­è¿›è¡Œï¼‰ã€‚</td>
</tr>
<tr class="odd">
<td>2. è´å¶æ–¯æ¨ç†ç†è§£ï¼Œå¯¹äºå°æ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°é‡ç”Ÿéšæœºæ€§ã€‚æˆ‘ä»¬çš„åéªŒåˆ†å¸ƒå°†é€šè¿‡æ›´å¹¿æ³›è€Œä¸æ˜¯ç´§å¯†é›†ä¸­æ¥åæ˜ è¿™ä¸€ç‚¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æ¨è®ºåº”è¯¥æ˜¯å¯çº æ­£çš„ã€‚</td>
</tr>
<tr class="even">
<td>3. ä¸è€ƒè™‘æ ·æœ¬å¤§å°æœ‰é‡å¤§å½±å“ï¼Œå°è¯•å¯¹ä¸ç¨³å®šçš„å¯¹è±¡è¿›è¡Œæ’åºä¼šå¯¼è‡´ç—…æ€æ’åºã€‚ä¸Šé¢æä¾›çš„æ–¹æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</td>
</tr>
<tr class="odd">
<td>##### Exercises</td>
</tr>
<tr class="even">
<td>1. How would you estimate the quantity <span class="math inline">\(E\left[ \cos{X} \right]\)</span>, where <span class="math inline">\(X \sim \text{Exp}(4)\)</span>? What about <span class="math inline">\(E\left[ \cos{X} | X \lt 1\right]\)</span>, i.e.&nbsp;the expected value <em>given</em> we know <span class="math inline">\(X\)</span> is less than 1? Would you need more samples than the original samples size to be equally accurate?</td>
</tr>
<tr class="odd">
<td>ä½ å¦‚ä½•ä¼°è®¡$ E <span class="math inline">\(ï¼Œå…¶ä¸­\)</span> X ï¼ˆ4ï¼‰<span class="math inline">\(ï¼Ÿæˆ–è€…\)</span> E <span class="math inline">\(ï¼Œå³é¢„æœŸå€¼*ç»™å®š*æˆ‘ä»¬çŸ¥é“\)</span> X $å°äº1ï¼Ÿæ‚¨æ˜¯å¦éœ€è¦æ¯”åŸå§‹æ ·æœ¬å¤§å°æ›´å¤šçš„æ ·æœ¬æ‰èƒ½åŒæ ·å‡†ç¡®ï¼Ÿ</td>
</tr>
<tr class="even">
<td>```python ## Enter code here import tensorflow as tf import tensorflow_probability as tfp tfd = tf.distributions</td>
</tr>
<tr class="odd">
<td>reset_sess()</td>
</tr>
<tr class="even">
<td>exp = tfd.Exponential(rate=4.) N = 10000 X = exp.sample(sample_shape=int(N))</td>
</tr>
<tr class="odd">
<td>e_cos_x=evaluate(tf.reduce_sum(tf.math.cos(X)/N)) e_cos_x_le_1=evaluate(tf.reduce_sum(tf.math.cos(X)*tf.cast(X&lt;1,tf.float32)/N))</td>
</tr>
<tr class="even">
<td>print(â€˜ğ¸[cosğ‘‹]â€™,e_cos_x) print(â€˜ğ¸[cosğ‘‹|ğ‘‹&lt;1]â€™,e_cos_x_le_1) ```</td>
</tr>
<tr class="odd">
<td>ğ¸[cosğ‘‹] 0.9411032 ğ¸[cosğ‘‹|ğ‘‹&lt;1] 0.9354135</td>
</tr>
<tr class="even">
<td>2. The following table was located in the paper â€œGoing for Three: Predicting the Likelihood of Field Goal Success with Logistic Regressionâ€ [2]. The table ranks football field-goal kickers by their percent of non-misses. What mistake have the researchers made?</td>
</tr>
</tbody>
</table>
<section id="kicker-careers-ranked-by-make-percentage" class="level4">
<h4 class="anchored" data-anchor-id="kicker-careers-ranked-by-make-percentage">Kicker Careers Ranked by Make Percentage</h4>
<table>
<tbody>
<tr>
<th>
Rank
</th>
<th>
Kicker
</th>
<th>
Make %
</th>
<th>
Number of Kicks
</th>
</tr>
<tr>
<td>
1
</td>
<td>
Garrett Hartley
</td>
<td>
87.7
</td>
<td>
57
</td>
</tr>
<tr>
<td>
2
</td>
<td>
Matt Stover
</td>
<td>
86.8
</td>
<td>
335
</td>
</tr>
<tr>
<td>
3
</td>
<td>
Robbie Gould
</td>
<td>
86.2
</td>
<td>
224
</td>
</tr>
<tr>
<td>
4
</td>
<td>
Rob Bironas
</td>
<td>
86.1
</td>
<td>
223
</td>
</tr>
<tr>
<td>
5
</td>
<td>
Shayne Graham
</td>
<td>
85.4
</td>
<td>
254
</td>
</tr>
<tr>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
â€¦
</td>
<td>
</td>
</tr>
<tr>
<td>
51
</td>
<td>
Dave Rayner
</td>
<td>
72.2
</td>
<td>
90
</td>
</tr>
<tr>
<td>
52
</td>
<td>
Nick Novak
</td>
<td>
71.9
</td>
<td>
64
</td>
</tr>
<tr>
<td>
53
</td>
<td>
Tim Seder
</td>
<td>
71.0
</td>
<td>
62
</td>
</tr>
<tr>
<td>
54
</td>
<td>
Jose Cortez
</td>
<td>
70.7
</td>
<td>
75
</td>
</tr>
<tr>
<td>
55
</td>
<td>
Wade Richey
</td>
<td>
66.1
</td>
<td>
56
</td>
</tr>
</tbody>
</table>
<p>In August 2013, <a href="http://bpodgursky.wordpress.com/2013/08/21/average-income-per-programming-language/">a popular post</a> on the average income per programmer of different languages was trending. Hereâ€™s the summary chart: (reproduced without permission, cause when you lie with stats, you gunna get the hammer). What do you notice about the extremes?</p>
<hr>
</section>
<section id="average-household-income-by-programming-language" class="level4">
<h4 class="anchored" data-anchor-id="average-household-income-by-programming-language">Average household income by programming language</h4>
<table>
<tbody><tr>
<td>
Language
</td>
<td>
Average Household Income ($)
</td>
<td>
Data Points
</td>
</tr>
<tr>
<td>
Puppet
</td>
<td>
87,589.29
</td>
<td>
112
</td>
</tr>
<tr>
<td>
Haskell
</td>
<td>
89,973.82
</td>
<td>
191
</td>
</tr>
<tr>
<td>
PHP
</td>
<td>
94,031.19
</td>
<td>
978
</td>
</tr>
<tr>
<td>
CoffeeScript
</td>
<td>
94,890.80
</td>
<td>
435
</td>
</tr>
<tr>
<td>
VimL
</td>
<td>
94,967.11
</td>
<td>
532
</td>
</tr>
<tr>
<td>
Shell
</td>
<td>
96,930.54
</td>
<td>
979
</td>
</tr>
<tr>
<td>
Lua
</td>
<td>
96,930.69
</td>
<td>
101
</td>
</tr>
<tr>
<td>
Erlang
</td>
<td>
97,306.55
</td>
<td>
168
</td>
</tr>
<tr>
<td>
Clojure
</td>
<td>
97,500.00
</td>
<td>
269
</td>
</tr>
<tr>
<td>
Python
</td>
<td>
97,578.87
</td>
<td>
2314
</td>
</tr>
<tr>
<td>
JavaScript
</td>
<td>
97,598.75
</td>
<td>
3443
</td>
</tr>
<tr>
<td>
Emacs Lisp
</td>
<td>
97,774.65
</td>
<td>
355
</td>
</tr>
<tr>
<td>
C#
</td>
<td>
97,823.31
</td>
<td>
665
</td>
</tr>
<tr>
<td>
Ruby
</td>
<td>
98,238.74
</td>
<td>
3242
</td>
</tr>
<tr>
<td>
C++
</td>
<td>
99,147.93
</td>
<td>
845
</td>
</tr>
<tr>
<td>
CSS
</td>
<td>
99,881.40
</td>
<td>
527
</td>
</tr>
<tr>
<td>
Perl
</td>
<td>
100,295.45
</td>
<td>
990
</td>
</tr>
<tr>
<td>
C
</td>
<td>
100,766.51
</td>
<td>
2120
</td>
</tr>
<tr>
<td>
Go
</td>
<td>
101,158.01
</td>
<td>
231
</td>
</tr>
<tr>
<td>
Scala
</td>
<td>
101,460.91
</td>
<td>
243
</td>
</tr>
<tr>
<td>
ColdFusion
</td>
<td>
101,536.70
</td>
<td>
109
</td>
</tr>
<tr>
<td>
Objective-C
</td>
<td>
101,801.60
</td>
<td>
562
</td>
</tr>
<tr>
<td>
Groovy
</td>
<td>
102,650.86
</td>
<td>
116
</td>
</tr>
<tr>
<td>
Java
</td>
<td>
103,179.39
</td>
<td>
1402
</td>
</tr>
<tr>
<td>
XSLT
</td>
<td>
106,199.19
</td>
<td>
123
</td>
</tr>
<tr>
<td>
ActionScript
</td>
<td>
108,119.47
</td>
<td>
113
</td>
</tr>
</tbody></table>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li>Wainer, Howard. <em>The Most Dangerous Equation</em>. American Scientist, Volume 95.</li>
<li>Clarck, Torin K., Aaron W. Johnson, and Alexander J. Stimpson. â€œGoing for Three: Predicting the Likelihood of Field Goal Success with Logistic Regression.â€ (2013): n.&nbsp;page. <a href="http://www.sloansportsconference.com/wp-content/uploads/2013/Going%20for%20Three%20Predicting%20the%20Likelihood%20of%20Field%20Goal%20Success%20with%20Logistic%20Regression.pdf">Web</a>. 20 Feb.&nbsp;2013.</li>
<li>http://en.wikipedia.org/wiki/Beta_function#Incomplete_beta_function</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/zhen8838\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="zhen8838/zhen8838.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>